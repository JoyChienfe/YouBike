import{i as w,u as D,r as m,o as t,c as a,b as C,d as e,e as i,l as N,v as H,F as S,m as o,n as L,x as z,L as A,k as F}from"./index-9fc17187.js";import{_ as K}from"./OutputExcel-293e323a.js";import{N as B}from"./DataTable-61e71186.js";import"./xlsx-bd534488.js";import"./get-slot-1efb97e5.js";const P={class:"container-fluid px-0"},Y=i("div",{class:"row mx-0"},[i("h1",{class:"report-h1 fw-bold"},"欠費統計(年度區分)")],-1),j={class:"row mx-0 mx-md-2 align-items-center col-md-auto col-12"},q=i("label",{class:"col-md-auto col-form-label px-0 px-md-2 fw-bolder"},"系統別:",-1),G={class:"col-md-auto px-0"},I=i("option",{selected:"",disabled:""},"請選擇",-1),J=i("option",{value:"1"},"1.0",-1),O=i("option",{value:"2.0+2.0e"},"2.0+2.0E",-1),Q=[I,J,O],R={class:"row mx-0 mx-md-2 align-items-center col-md-auto col-12"},W=i("label",{class:"col-md-auto col-form-label px-0 px-md-2 fw-bolder"},"城市:",-1),X={class:"col-md-auto px-0"},Z=i("option",{selected:"",disabled:""},"請選擇",-1),ee={key:0,value:"Taipei"},te={key:1,value:"Newtaipei"},ae={key:2,value:"Taoyuan"},oe={key:3,value:"Hsinchu"},ne={key:4,value:"Miaoli"},ie={key:5,value:"Taichung"},le={key:0,value:"Taipei2"},se={key:1,value:"Taipei2E"},ue={key:2,value:"Newtaipei2"},ce={key:3,value:"Newtaipei2E"},re={key:4,value:"Taoyuan2"},de={key:5,value:"Taoyuan2E"},_e={key:6,value:"Hsinchu2"},me={key:7,value:"Hsinchu2E"},he={key:8,value:"Hsinchu_Country2"},ve={key:9,value:"Hsinchu_Country2E"},ye={key:10,value:"HsinchuScience2"},pe={key:11,value:"HsinchuScience2E"},ke={key:12,value:"Miaoli2"},ge={key:13,value:"Miaoli2E"},fe={key:14,value:"Taichung2"},xe={key:15,value:"Taichung2E"},Ee={key:16,value:"Chiayi2"},be={key:17,value:"Chiayi2E"},Te={key:18,value:"Chiayi_Country2"},we={key:19,value:"Chiayi_Country2E"},Ce={key:20,value:"Tainan2"},Ne={key:21,value:"Tainan2E"},He={key:22,value:"Kaohsiung2"},Se={key:23,value:"Kaohsiung2E"},ze={key:24,value:"Pingtung2"},Be={key:25,value:"Pingtung2E"},Ve={key:26,value:"Taitung2"},$e={key:27,value:"Taitung2E"},Me={class:"row mx-0 mx-md-2 align-items-center col-md-auto col-12"},Ye={__name:"ArrearsYearStatistics",setup(Ue){const f=w("ischange"),n=D().citys,V=w("$swal");async function x(d){V({icon:"error",title:`${d}`,showConfirmButton:!1})}const v=m(!1),E=m(),c=m("請選擇"),y=m(null),_=m([]),h=m("請選擇"),b=[{key:"num1",align:"center",fixed:"left",title:"欠費年度",width:80},{key:"num2",align:"center",title:"全部筆數"},{key:"num3",align:"center",title:"全部欠款"},{key:"num4",align:"center",title:"特殊狀況筆數"},{key:"num5",align:"center",title:"特殊狀況欠款"},{key:"num6",align:"center",title:"真實筆數"},{key:"num7",align:"center",title:"真實欠款"},{key:"num8",align:"center",title:"市府應收款(10元)"},{key:"num9",align:"center",title:"市府應收款(5元)"},{key:"num10",align:"center",title:"合計市府應收款"},{key:"num11",align:"center",title:"合計欠費"}],T=[{key:"num1",align:"center",fixed:"left",title:"欠費年度",width:80},{key:"num2",align:"center",title:"全部筆數"},{key:"num3",align:"center",title:"全部欠款"},{key:"num4",align:"center",title:"特殊狀況筆數"},{key:"num5",align:"center",title:"特殊狀況欠款"},{key:"num6",align:"center",title:"真實筆數"},{key:"num7",align:"center",title:"真實欠款"},{key:"num8",align:"center",title:"市府應收款(10元)"},{key:"num9",align:"center",title:"市府應收款(5元)"},{key:"num10",align:"center",title:"市府應收款(2元)"},{key:"num11",align:"center",title:"合計市府應收款"},{key:"num12",align:"center",title:"合計欠費"}];let p=[],k="",g=[];const $=(d,u)=>{p=[],k="",g=[];let r=[];p=[...d],k=u,c.value=="1"?r=[...b]:c.value=="2.0+2.0e"&&(r=[...T]),r.forEach(l=>{g.push(l.title)})},M=async()=>{try{v.value=!0,_.value=[];const d="https://report.youbike.com.tw/isauth/gcpfun",u={dataset_id:"data_analysis",city:h.value};c.value==1?u.table_id="arrearsall_report1":c.value=="2.0+2.0e"&&(u.table_id="arrearsall_report2");const r=await F.get(d,{params:u});if(v.value=!1,!r.data.data)return;r.data.data.forEach(l=>{const s={};s.num1=l.NYear,s.num2=l.CNT_all,s.num3=l.Total_all,s.num4=l.CNT_special,s.num5=l.Total_special,s.num6=l.CNT_real,s.num7=l.Total_real,s.num8=l.gov10,s.num9=l.gov5,c.value=="1"?(s.num10=l.gov,s.num11=l.total_arrearsall):c.value=="2.0+2.0e"&&(s.num10=l.gov2,s.num11=l.gov,s.num12=l.total_arrearsall),_.value.push(s),$(_.value,"欠費統計(年度區分)")})}catch(d){console.log(d)}},U=()=>{if(c.value=="請選擇"){x("系統不能為空");return}else if(h.value=="請選擇"){x("城市不能為空");return}c.value=="1"?y.value=1:c.value=="2.0+2.0e"&&(y.value=2),M()};return(d,u)=>(t(),a("div",P,[C(e(A),{active:v.value,"onUpdate:active":u[0]||(u[0]=r=>v.value=r),"can-cancel":!1,"is-full-page":!0},null,8,["active"]),Y,i("form",{class:L(["row mx-0",{"report-header":!e(f),"report-header-dark":e(f)}])},[i("div",j,[q,i("div",G,[N(i("select",{class:"form-select form-select-sm","aria-label":"car","onUpdate:modelValue":u[1]||(u[1]=r=>c.value=r),onChange:u[2]||(u[2]=r=>h.value="請選擇")},Q,544),[[H,c.value]])])]),i("div",R,[W,i("div",X,[N(i("select",{class:"form-select form-select-sm","aria-label":"car","onUpdate:modelValue":u[3]||(u[3]=r=>h.value=r)},[Z,c.value==1?(t(),a(S,{key:0},[e(n).includes(2)?(t(),a("option",ee,"台北市")):o("",!0),e(n).includes(3)?(t(),a("option",te,"新北市")):o("",!0),e(n).includes(4)?(t(),a("option",ae,"桃園市")):o("",!0),e(n).includes(5)?(t(),a("option",oe,"新竹市")):o("",!0),e(n).includes(7)?(t(),a("option",ne,"苗栗縣")):o("",!0),e(n).includes(8)?(t(),a("option",ie,"台中市")):o("",!0)],64)):c.value=="2.0+2.0e"?(t(),a(S,{key:1},[e(n).includes(2)?(t(),a("option",le,"台北市2.0")):o("",!0),e(n).includes(2)?(t(),a("option",se,"台北市2.0E")):o("",!0),e(n).includes(3)?(t(),a("option",ue,"新北市2.0")):o("",!0),e(n).includes(3)?(t(),a("option",ce,"新北市2.0E")):o("",!0),e(n).includes(4)?(t(),a("option",re,"桃園市2.0")):o("",!0),e(n).includes(4)?(t(),a("option",de,"桃園市2.0E")):o("",!0),e(n).includes(5)?(t(),a("option",_e,"新竹市2.0")):o("",!0),e(n).includes(5)?(t(),a("option",me,"新竹市2.0E")):o("",!0),e(n).includes(6)?(t(),a("option",he,"新竹縣2.0")):o("",!0),e(n).includes(6)?(t(),a("option",ve,"新竹縣2.0E")):o("",!0),e(n).includes(20)?(t(),a("option",ye,"竹科2.0")):o("",!0),e(n).includes(20)?(t(),a("option",pe,"竹科2.0E")):o("",!0),e(n).includes(7)?(t(),a("option",ke,"苗栗縣2.0")):o("",!0),e(n).includes(7)?(t(),a("option",ge,"苗栗縣2.0E")):o("",!0),e(n).includes(8)?(t(),a("option",fe,"台中市2.0")):o("",!0),e(n).includes(8)?(t(),a("option",xe,"台中市2.0E")):o("",!0),e(n).includes(12)?(t(),a("option",Ee,"嘉義市2.0")):o("",!0),e(n).includes(12)?(t(),a("option",be,"嘉義市2.0E")):o("",!0),e(n).includes(13)?(t(),a("option",Te,"嘉義縣2.0")):o("",!0),e(n).includes(13)?(t(),a("option",we,"嘉義縣2.0E")):o("",!0),e(n).includes(14)?(t(),a("option",Ce,"台南市2.0")):o("",!0),e(n).includes(14)?(t(),a("option",Ne,"台南市2.0E")):o("",!0),e(n).includes(15)?(t(),a("option",He,"高雄市2.0")):o("",!0),e(n).includes(15)?(t(),a("option",Se,"高雄市2.0E")):o("",!0),e(n).includes(16)?(t(),a("option",ze,"屏東縣2.0")):o("",!0),e(n).includes(16)?(t(),a("option",Be,"屏東縣2.0E")):o("",!0),e(n).includes(19)?(t(),a("option",Ve,"台東縣2.0")):o("",!0),e(n).includes(19)?(t(),a("option",$e,"台東縣2.0E")):o("",!0)],64)):o("",!0)],512),[[H,h.value]])])]),i("div",Me,[i("button",{type:"button",class:"btn btn-success text-light mt-3 mt-md-0 col-md-auto mx-md-2",onClick:U}," 搜尋 "),C(K,{class:"btn btn-primary text-light mt-3 mt-md-0 col-md-auto mx-md-2",data:e(p),name:e(k),header:e(g)},null,8,["data","name","header"])])],2),_.value.length>0&&y.value==1?(t(),z(e(B),{key:0,ref_key:"dataTable",ref:E,data:_.value,columns:b,pagination:{pageSize:15},"max-height":600,"scroll-x":1e3,size:"small",bordered:!1,"single-line":!1,striped:""},null,8,["data"])):o("",!0),_.value.length>0&&y.value==2?(t(),z(e(B),{key:1,ref_key:"dataTable",ref:E,data:_.value,columns:T,size:"small",pagination:{pageSize:15},"max-height":600,"scroll-x":1e3,bordered:!1,"single-line":!1,striped:""},null,8,["data"])):o("",!0)]))}};export{Ye as default};
