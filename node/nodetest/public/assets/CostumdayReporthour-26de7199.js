import{u as W,i as P,r as d,o as l,c as a,b,d as e,e as o,l as N,v as M,F as D,m as n,n as X,x as Z,L as ee,q as te,k as ie}from"./index-b68f8f3e.js";import{_ as le}from"./OutputExcel-a9eaeb80.js";import{N as ae}from"./DataTable-269c4b67.js";import"./xlsx-bd534488.js";import"./get-slot-1efb97e5.js";const ne={class:"container-fluid px-0"},oe=o("div",{class:"row mx-0"},[o("h1",{class:"report-h1 fw-bold"},"每小時明細表")],-1),se={class:"row mx-0 mx-md-2 align-items-center col-md-auto col-12"},ce=o("label",{class:"col-md-auto col-form-label px-0 px-md-2 fw-bolder"},"系統別:",-1),re={class:"col-md-auto px-0"},ue=o("option",{selected:"",disabled:""},"請選擇",-1),me=o("option",{value:"1.0"},"1.0",-1),de=o("option",{value:"2.0"},"2.0",-1),ye=[ue,me,de],ge={class:"row mx-0 mx-md-2 align-items-center col-md-auto col-12"},ke=o("label",{class:"col-md-auto col-form-label px-0 px-md-2 fw-bolder"},"城市:",-1),ve={class:"col-md-auto px-0"},_e=o("option",{selected:"",disabled:""},"請選擇",-1),fe={key:0,value:"TP"},he={key:1,value:"NTP2"},pe={key:2,value:"Taoyuan_two"},xe={key:3,value:"Hsinchu2"},we={key:4,value:"Hsinchu_Country"},Te={key:5,value:"Miaoli_two"},be={key:6,value:"Taichung2"},Ce={key:7,value:"Chiayi"},Pe={key:8,value:"Tainan"},Ne={key:9,value:"Kaohsiung"},Me={key:10,value:"Pingtung"},De={key:11,value:"Taitung"},He={key:0,value:"NTP"},Ve={key:1,value:"Taoyuan"},Be={key:2,value:"Miaoli"},Ue={key:3,value:"Taichung"},$e={class:"row px-0 ps-md-4 mx-0 mx-md-2 align-items-center col-md-auto mt-3 mt-md-0"},Ee={class:"row mx-0 mx-md-2 align-items-center col-md-auto col-12"},Ae={__name:"CostumdayReporthour",setup(Ke){const r=W().citys,C=P("ischange"),H=P("$swal");async function h(m){H({icon:"error",title:`${m}`,showConfirmButton:!1})}const p=d(null),t=d("請選擇"),y=d("請選擇"),k=d(!1),v=d([]),_=d(),V=m=>{const c=new Date(m),u=new Date,g=new Date(u.getFullYear(),u.getMonth(),u.getDate());return c<new Date(2023,7,8)||c>=g},s=d([]),B=[{key:"item1",align:"center",fixed:"left",title:"日期/時段"},{key:"item2",align:"center",title:"台北2.0進線數"},{key:"item3",align:"center",title:"台北2.0掛斷數"},{key:"item4",align:"center",title:"台北2.0接通數"},{key:"item5",align:"center",title:"1999進線數"},{key:"item6",align:"center",title:"1999掛斷數"},{key:"item7",align:"center",title:"1999接通數"},{key:"item8",align:"center",title:"5511進線數"},{key:"item9",align:"center",title:"5511掛斷數"},{key:"item10",align:"center",title:"5511接通數"}],U=[{key:"item1",align:"center",fixed:"left",title:"日期/時段"},{key:"item2",align:"center",title:"新北2.0進線數"},{key:"item3",align:"center",title:"新北2.0掛斷數"},{key:"item4",align:"center",title:"新北2.0接通數"}],$=[{key:"item1",align:"center",fixed:"left",title:"日期/時段"},{key:"item2",align:"center",title:"新北1.0進線數"},{key:"item3",align:"center",title:"新北1.0掛斷數"},{key:"item4",align:"center",title:"新北1.0接通數"}],E=[{key:"item1",align:"center",fixed:"left",title:"日期/時段"},{key:"item2",align:"center",title:"桃園1.0進線數"},{key:"item3",align:"center",title:"桃園1.0掛斷數"},{key:"item4",align:"center",title:"桃園1.0接通數"}],K=[{key:"item1",align:"center",fixed:"left",title:"日期/時段"},{key:"item2",align:"center",title:"桃園2.0進線數"},{key:"item3",align:"center",title:"桃園2.0掛斷數"},{key:"item4",align:"center",title:"桃園2.0接通數"}],S=[{key:"item1",align:"center",fixed:"left",title:"日期/時段"},{key:"item2",align:"center",title:"新竹2.0進線數"},{key:"item3",align:"center",title:"新竹2.0掛斷數"},{key:"item4",align:"center",title:"新竹2.0接通數"}],z=[{key:"item1",align:"center",fixed:"left",title:"日期/時段"},{key:"item2",align:"center",title:"竹縣2.0進線數"},{key:"item3",align:"center",title:"竹縣2.0掛斷數"},{key:"item4",align:"center",title:"竹縣2.0接通數"}],F=[{key:"item1",align:"center",fixed:"left",title:"日期/時段"},{key:"item2",align:"center",title:"苗栗1.0進線數"},{key:"item3",align:"center",title:"苗栗1.0掛斷數"},{key:"item4",align:"center",title:"苗栗1.0接通數"}],L=[{key:"item1",align:"center",fixed:"left",title:"日期/時段"},{key:"item2",align:"center",title:"苗栗2.0進線數"},{key:"item3",align:"center",title:"苗栗2.0掛斷數"},{key:"item4",align:"center",title:"苗栗2.0接通數"}],j=[{key:"item1",align:"center",fixed:"left",title:"日期/時段"},{key:"item2",align:"center",title:"嘉義進線數"},{key:"item3",align:"center",title:"嘉義掛斷數"},{key:"item4",align:"center",title:"嘉義接通數"}],q=[{key:"item1",align:"center",fixed:"left",title:"日期/時段"},{key:"item2",align:"center",title:"台中1.0進線數"},{key:"item3",align:"center",title:"台中1.0掛斷數"},{key:"item4",align:"center",title:"台中1.0接通數"}],A=[{key:"item1",align:"center",fixed:"left",title:"日期/時段"},{key:"item2",align:"center",title:"台中2.0進線數"},{key:"item3",align:"center",title:"台中2.0掛斷數"},{key:"item4",align:"center",title:"台中2.0接通數"}],I=[{key:"item1",align:"center",fixed:"left",title:"日期/時段"},{key:"item2",align:"center",title:"台南2.0進線數"},{key:"item3",align:"center",title:"台南2.0掛斷數"},{key:"item4",align:"center",title:"台南2.0接通數"}],R=[{key:"item1",align:"center",fixed:"left",title:"日期/時段"},{key:"item2",align:"center",title:"高雄2.0進線數"},{key:"item3",align:"center",title:"高雄2.0掛斷數"},{key:"item4",align:"center",title:"高雄2.0接通數"},{key:"item5",align:"center",title:"0800進線數"},{key:"item6",align:"center",title:"0800掛斷數"},{key:"item7",align:"center",title:"0800接通數"}],Y=[{key:"item1",align:"center",fixed:"left",title:"日期/時段"},{key:"item2",align:"center",title:"屏東2.0進線數"},{key:"item3",align:"center",title:"屏東2.0掛斷數"},{key:"item4",align:"center",title:"屏東2.0接通數"}];let x=[],w="",T=[];const G=(m,c,u)=>{x=[],w="",T=[],x=[...m],w=u,c.forEach(g=>{T.push(g.title)})},J=()=>{t.value==="TP"?s.value=[...B]:t.value==="NTP2"?s.value=[...$]:t.value==="NTP"?s.value=[...U]:t.value==="Taoyuan"?s.value=[...E]:t.value==="Taoyuan_two"?s.value=[...K]:t.value==="Hsinchu2"?s.value=[...S]:t.value==="Hsinchu_Country"?s.value=[...z]:t.value==="Miaoli"?s.value=[...F]:t.value==="Chiayi"?s.value=[...j]:t.value==="Taichung2"?s.value=[...A]:t.value==="Taichung"?s.value=[...q]:t.value==="Kaohsiung"?s.value=[...R]:t.value==="Tainan"?s.value=[...I]:t.value==="Pingtung"?s.value=[...Y]:t.value==="Miaoli_two"&&(s.value=[...L])},O=async()=>{try{const m="https://report.youbike.com.tw/isauth/gcpfun";let c={dataset_id:"report",table_id:"CTI_inline_detail",date:_.value,city:t.value,sys:y.value};k.value=!0;const g=(await ie.get(m,{params:c})).data.data,f=[];g.forEach(i=>{t.value==="TP"?f.push({item1:i.time_range,item2:i.total_two,item3:i.hangup_two,item4:i.answer_two,item5:i.total_1999,item6:i.hangup_1999,item7:i.answer_1999,item8:i.total_5511,item9:i.hangup_5511,item10:i.answer_5511}):t.value==="Kaohsiung"?f.push({item1:i.time_range,item2:i.total_two,item3:i.hangup_two,item4:i.answer_two,item5:i.total_0800,item6:i.hangup_0800,item7:i.answer_0800}):f.push({item1:i.time_range,item2:i.total,item3:i.hangup,item4:i.answer})}),v.value=[...f],G(v.value,s.value,"每小時明細表"),p.value&&p.value.page(1),k.value=!1}catch(m){console.log(m)}},Q=async()=>{if(y.value==="請選擇")return h("請選擇系統別");if(t.value==="請選擇")return h("請選擇城市");if(!_.value)return h("請選擇日期");J(),await O()};return(m,c)=>(l(),a("div",ne,[b(e(ee),{active:k.value,"onUpdate:active":c[0]||(c[0]=u=>k.value=u),"can-cancel":!1,"is-full-page":!0},null,8,["active"]),oe,o("form",{class:X(["row mx-0",{"report-header":!e(C),"report-header-dark":e(C)}])},[o("div",se,[ce,o("div",re,[N(o("select",{class:"form-select form-select-sm","aria-label":"car","onUpdate:modelValue":c[1]||(c[1]=u=>y.value=u),onChange:c[2]||(c[2]=u=>t.value="請選擇")},ye,544),[[M,y.value]])])]),o("div",ge,[ke,o("div",ve,[N(o("select",{class:"form-select form-select-sm","aria-label":"car","onUpdate:modelValue":c[3]||(c[3]=u=>t.value=u)},[_e,y.value==2?(l(),a(D,{key:0},[e(r).includes(2)?(l(),a("option",fe,"台北市")):n("",!0),e(r).includes(3)?(l(),a("option",he," 新北市 ")):n("",!0),e(r).includes(4)?(l(),a("option",pe," 桃園市 ")):n("",!0),e(r).includes(5)?(l(),a("option",xe," 新竹市 ")):n("",!0),e(r).includes(6)?(l(),a("option",we," 新竹縣 ")):n("",!0),e(r).includes(7)?(l(),a("option",Te," 苗栗縣 ")):n("",!0),e(r).includes(8)?(l(),a("option",be," 台中市 ")):n("",!0),e(r).includes(12)?(l(),a("option",Ce," 嘉義市 ")):n("",!0),e(r).includes(14)?(l(),a("option",Pe," 台南市 ")):n("",!0),e(r).includes(15)?(l(),a("option",Ne," 高雄市 ")):n("",!0),e(r).includes(16)?(l(),a("option",Me," 屏東縣 ")):n("",!0),e(r).includes(19)?(l(),a("option",De," 台東縣 ")):n("",!0)],64)):y.value==1?(l(),a(D,{key:1},[e(r).includes(3)?(l(),a("option",He,"新北市")):n("",!0),e(r).includes(4)?(l(),a("option",Ve," 桃園縣 ")):n("",!0),e(r).includes(7)?(l(),a("option",Be," 苗栗縣 ")):n("",!0),e(r).includes(8)?(l(),a("option",Ue," 台中市 ")):n("",!0)],64)):n("",!0)],512),[[M,t.value]])]),o("div",$e,[b(e(te),{class:"px-0","formatted-value":_.value,"onUpdate:formattedValue":c[4]||(c[4]=u=>_.value=u),type:"date",actions:null,"input-readonly":!0,"update-value-on-close":!0,placeholder:"請選擇日期","value-format":"yyyy-MM-dd","is-date-disabled":V},null,8,["formatted-value"])])]),o("div",Ee,[o("button",{type:"button",class:"btn btn-success text-light mt-3 mt-md-0 col-md-auto mx-md-2",onClick:Q}," 搜尋 "),b(le,{class:"btn btn-primary text-light mt-3 mt-md-0 col-md-auto mx-md-2",data:e(x),name:e(w),header:e(T)},null,8,["data","name","header"])])],2),v.value.length>1?(l(),Z(e(ae),{key:0,ref_key:"dataTable",ref:p,size:"small",pagination:{pageSize:17},columns:s.value,data:v.value,"max-height":600,"scroll-x":700,bordered:!1,"single-line":!1,striped:""},null,8,["columns","data"])):n("",!0)]))}};export{Ae as default};
