import{_ as P,i as $,u as Y,r as _,o as t,c as s,b as N,d as e,e as l,l as M,v as S,F as T,m as a,n as q,x as z,L as K,q as j,s as A,t as G,k as J}from"./index-1103b7f9.js";import{_ as Q}from"./OutputExcel-6ed9633c.js";import{N as R}from"./DataTable-1e233750.js";import"./xlsx-bd534488.js";import"./get-slot-1efb97e5.js";const r=y=>(A("data-v-cf2456d2"),y=y(),G(),y),W={class:"container-fluid px-0"},X=r(()=>l("div",{class:"row mx-0"},[l("h1",{class:"report-h1 fw-bold"},"營運管理月報")],-1)),Z={class:"row mx-0 mx-md-2 align-items-center col-md-auto col-12"},ee=r(()=>l("label",{class:"col-md-auto col-form-label px-0 px-md-2 fw-bolder"},"系統別:",-1)),te={class:"col-md-auto px-0"},oe=r(()=>l("option",{selected:"",disabled:""},"請選擇",-1)),se=r(()=>l("option",{value:"1"},"1.0",-1)),ae=r(()=>l("option",{value:"2"},"2.0",-1)),ie=r(()=>l("option",{value:"2E"},"2.0E",-1)),ne=[oe,se,ae,ie],le={class:"row mx-0 mx-md-2 align-items-center col-md-auto col-12"},ce=r(()=>l("label",{class:"col-md-auto col-form-label px-0 px-md-2 fw-bolder"},"城市:",-1)),ue={class:"col-md-auto px-0"},de=r(()=>l("option",{selected:"",disabled:""},"請選擇",-1)),re={key:0,value:"Taipei2"},me={key:1,value:"Newtaipei2"},_e={key:2,value:"Taoyuan2"},he={key:3,value:"Hsinchu2"},pe={key:4,value:"Hsinchu_Country2"},ve={key:5,value:"HsinchuScience2"},ye={key:6,value:"Miaoli2"},fe={key:7,value:"Taichung2"},ke={key:8,value:"Chiayi2"},ge={key:9,value:"Tainan2"},xe={key:10,value:"Kaohsiung2"},be={key:11,value:"Pingtung2"},Ee={key:0,value:"Newtaipei"},Ce={key:1,value:"Taoyuan"},Ne={key:2,value:"Miaoli"},Te={key:0,value:"Taipei2E"},De={key:1,value:"Newtaipei2E"},we={key:2,value:"Taoyuan2E"},$e={key:3,value:"Hsinchu_Country2E"},Me={key:4,value:"HsinchuScience2E"},Se={key:5,value:"Miaoli2E"},Ve={key:6,value:"Taichung2E"},Be={key:7,value:"Chiayi2E"},He={key:8,value:"Tainan2E"},Ue={key:9,value:"Kaohsiung2E"},Fe={key:10,value:"Pingtung2E"},Ie={class:"row mx-0 mx-md-2 align-items-center col-md-2 col-12 mt-3 mt-md-0"},Le={class:"row mx-0 mx-md-2 align-items-center col-md-auto col-12"},Oe={__name:"OperationMonthDaily",setup(y){const D=$("ischange"),i=Y().citys,V=$("$swal");async function b(o){V({icon:"error",title:`${o}`,showConfirmButton:!1})}const B=o=>{const u=new Date(o).getFullYear(),v=new Date().getFullYear();return u<2020||u>v},H=_(null),h=_("請選擇"),f=_(!1),m=_("請選擇"),p=_([]),k=_([]),g=_();let x=[],E="",C=[];const U=(o,c,u)=>{x=[],E="",C=[],x=[...o],E=u,c.forEach(d=>{C.push(d.title)})},F=async()=>{try{const o="http://127.0.0.1:3000/isauth/gcpfun",c={dataset_id:"report",table_id:`monthly_report_query${m.value}`,city:h.value,date:g.value};f.value=!0;const u=await J.get(o,{params:c});f.value=!1;let d=[];if(d=u.data.data,d.length===0){k.value=[],p.value=[],x=[];return}let v=[{key:"item1",align:"center",fixed:"left",width:"200",title:d[0].item},{key:"item2",align:"center",title:d[0].year1}];for(let n=1;n<=12;n++)v.push({key:`item${n+2}`,align:"center",title:d[0][`month${n}`]});v.push({key:"item15",align:"center",title:d[0].year2});let w=[];d.forEach((n,O)=>{O!==0&&w.push({item1:n.item,item2:n.year1,item3:n.month1,item4:n.month2,item5:n.month3,item6:n.month4,item7:n.month5,item8:n.month6,item9:n.month7,item10:n.month8,item11:n.month9,item12:n.month10,item13:n.month11,item14:n.month12,item15:n.year2})}),k.value=[...v],p.value=[...w],U(p.value,k.value,"經營管理月報")}catch(o){console.log(o)}},I=async()=>{if(m.value=="請選擇")return b("請選擇系統別");if(h.value==="請選擇")return b("請選擇城市");if(!g.value)return b("請選擇日期");F()},L=o=>{if(o.item1==="場站資訊"||o.item1==="租借資訊"||o.item1==="收入資訊"||o.item1==="妥善率資訊"||o.item1==="票卡資訊"||o.item1==="當月租借車次"&&!o.item2&&!o.item3&&!o.item4&&!o.item5&&!o.item6||o.item1==="註冊票卡淨增加數"||o.item1==="租賃收入明細"||o.item1==="各時段使用資訊"||o.item1==="營運資訊"||o.item1==="租賃時間使用資訊"||o.item1==="維護管理"||o.item1==="騎乘距離分析"||o.item1=="保險投保數量")return"too-old"};return(o,c)=>(t(),s("div",W,[N(e(K),{active:f.value,"onUpdate:active":c[0]||(c[0]=u=>f.value=u),"can-cancel":!1,"is-full-page":!0},null,8,["active"]),X,l("form",{class:q(["row mx-0",{"report-header":!e(D),"report-header-dark":e(D)}])},[l("div",Z,[ee,l("div",te,[M(l("select",{class:"form-select form-select-sm","aria-label":"car","onUpdate:modelValue":c[1]||(c[1]=u=>m.value=u),onChange:c[2]||(c[2]=u=>h.value="請選擇")},ne,544),[[S,m.value]])])]),l("div",le,[ce,l("div",ue,[M(l("select",{class:"form-select form-select-sm","aria-label":"car","onUpdate:modelValue":c[3]||(c[3]=u=>h.value=u)},[de,m.value==2?(t(),s(T,{key:0},[e(i).includes(2)?(t(),s("option",re," 台北市 ")):a("",!0),e(i).includes(3)?(t(),s("option",me," 新北市 ")):a("",!0),e(i).includes(4)?(t(),s("option",_e," 桃園市 ")):a("",!0),e(i).includes(5)?(t(),s("option",he," 新竹市 ")):a("",!0),e(i).includes(6)?(t(),s("option",pe," 新竹縣 ")):a("",!0),e(i).includes(20)?(t(),s("option",ve," 竹科 ")):a("",!0),e(i).includes(7)?(t(),s("option",ye," 苗栗縣 ")):a("",!0),e(i).includes(8)?(t(),s("option",fe," 台中市 ")):a("",!0),e(i).includes(12)?(t(),s("option",ke," 嘉義市 ")):a("",!0),e(i).includes(14)?(t(),s("option",ge," 台南市 ")):a("",!0),e(i).includes(15)?(t(),s("option",xe," 高雄市 ")):a("",!0),e(i).includes(16)?(t(),s("option",be," 屏東縣 ")):a("",!0)],64)):m.value==1?(t(),s(T,{key:1},[e(i).includes(3)?(t(),s("option",Ee," 新北市 ")):a("",!0),e(i).includes(4)?(t(),s("option",Ce," 桃園市 ")):a("",!0),e(i).includes(7)?(t(),s("option",Ne," 苗栗縣 ")):a("",!0)],64)):m.value=="2E"?(t(),s(T,{key:2},[e(i).includes(2)?(t(),s("option",Te," 台北市 ")):a("",!0),e(i).includes(3)?(t(),s("option",De," 新北市 ")):a("",!0),e(i).includes(4)?(t(),s("option",we," 桃園市 ")):a("",!0),e(i).includes(6)?(t(),s("option",$e," 新竹縣 ")):a("",!0),e(i).includes(20)?(t(),s("option",Me," 竹科 ")):a("",!0),e(i).includes(7)?(t(),s("option",Se," 苗栗縣 ")):a("",!0),e(i).includes(8)?(t(),s("option",Ve," 台中市 ")):a("",!0),e(i).includes(12)?(t(),s("option",Be," 嘉義市 ")):a("",!0),e(i).includes(14)?(t(),s("option",He," 台南市 ")):a("",!0),e(i).includes(15)?(t(),s("option",Ue," 高雄市 ")):a("",!0),e(i).includes(16)?(t(),s("option",Fe," 屏東縣 ")):a("",!0)],64)):a("",!0)],512),[[S,h.value]])])]),l("div",Ie,[N(e(j),{class:"px-0","formatted-value":g.value,"onUpdate:formattedValue":c[4]||(c[4]=u=>g.value=u),type:"year",actions:null,"input-readonly":!0,"is-date-disabled":B,placeholder:"請選擇日期","value-format":"yyyy"},null,8,["formatted-value"])]),l("div",Le,[l("button",{type:"button",class:"btn btn-success text-light mt-3 mt-md-0 col-md-auto mx-md-2",onClick:I}," 搜尋 "),N(Q,{class:"btn btn-primary text-light mt-3 mt-md-0 col-md-auto mx-md-2",data:e(x),name:e(E),header:e(C)},null,8,["data","name","header"])])],2),p.value.length?(t(),z(e(R),{key:0,size:"small",ref_key:"table",ref:H,"row-class-name":L,columns:k.value,data:p.value,"max-height":600,"scroll-x":1e3,bordered:!1,"single-line":!1,striped:""},null,8,["columns","data"])):a("",!0)]))}},Ae=P(Oe,[["__scopeId","data-v-cf2456d2"]]);export{Ae as default};
