import{i as N,u as F,r as _,o as a,c as n,b as x,d as e,e as u,l as D,v as H,F as S,m as o,n as L,x as V,L as Y,q as A,k as K}from"./index-b68f8f3e.js";import{_ as j}from"./OutputExcel-a9eaeb80.js";import{N as z}from"./DataTable-269c4b67.js";import"./xlsx-bd534488.js";import"./get-slot-1efb97e5.js";const q={class:"container-fluid px-0"},G=u("div",{class:"row mx-0"},[u("h1",{class:"report-h1 fw-bold"},"欠費統計(金額區分)")],-1),I={class:"row mx-0 mx-md-2 align-items-center col-md-auto"},J={class:"row mx-0 mx-md-2 align-items-center col-md-auto col-12"},O=u("label",{class:"col-md-auto col-form-label px-0 px-md-2 fw-bolder"},"系統別:",-1),Q={class:"col-md-auto px-0"},R=u("option",{selected:"",disabled:""},"請選擇",-1),W=u("option",{value:"1"},"1.0",-1),X=u("option",{value:"2.0+2.0e"},"2.0+2.0E",-1),Z=[R,W,X],ee={class:"row mx-0 mx-md-2 align-items-center col-md-auto col-12"},te=u("label",{class:"col-md-auto col-form-label px-0 px-md-2 fw-bolder"},"城市:",-1),ae={class:"col-md-auto px-0"},ne=u("option",{selected:"",disabled:""},"請選擇",-1),oe={key:0,value:"Taipei"},se={key:1,value:"Newtaipei"},le={key:2,value:"Taoyuan"},ie={key:3,value:"Hsinchu"},ue={key:4,value:"Miaoli"},ce={key:5,value:"Taichung"},re={key:0,value:"Taipei2"},de={key:1,value:"Taipei2E"},me={key:2,value:"Newtaipei2"},_e={key:3,value:"Newtaipei2E"},ve={key:4,value:"Taoyuan2"},pe={key:5,value:"Taoyuan2E"},ke={key:6,value:"Hsinchu2"},ye={key:7,value:"Hsinchu2E"},he={key:8,value:"Hsinchu_Country2"},ge={key:9,value:"Hsinchu_Country2E"},fe={key:10,value:"HsinchuScience2"},be={key:11,value:"HsinchuScience2E"},xe={key:12,value:"Miaoli2"},Ee={key:13,value:"Miaoli2E"},we={key:14,value:"Taichung2"},Te={key:15,value:"Taichung2E"},Ce={key:16,value:"Chiayi2"},Ne={key:17,value:"Chiayi2E"},De={key:18,value:"Chiayi_Country2"},He={key:19,value:"Chiayi_Country2E"},Se={key:20,value:"Tainan2"},Ve={key:21,value:"Tainan2E"},ze={key:22,value:"Kaohsiung2"},Be={key:23,value:"Kaohsiung2E"},Ue={key:24,value:"Pingtung2"},$e={key:25,value:"Pingtung2E"},Me={key:26,value:"Taitung2"},Pe={key:27,value:"Taitung2E"},Fe={class:"row mx-0 mx-md-2 align-items-center col-md-auto col-12"},Ie={__name:"ArrearsStatistics",setup(Le){const E=N("ischange"),B=N("$swal");async function h(d){B({icon:"error",title:`${d}`,showConfirmButton:!1})}const s=F().citys,p=_(!1),w=_(),r=_("請選擇"),k=_(null),m=_([]),y=_(),v=_("請選擇"),T=[{key:"num1",align:"center",fixed:"left",title:"欠費級距(元)",width:150},{key:"num2",align:"center",title:"真實筆數"},{key:"num3",align:"center",title:"真實欠款"},{key:"num4",align:"center",title:"特殊狀況筆數"},{key:"num5",align:"center",title:"特殊狀況欠款"},{key:"num6",align:"center",title:"市府應收款(10元)"},{key:"num7",align:"center",title:"市府應收款(5元)"},{key:"num8",align:"center",title:"合計市府應收款"},{key:"num9",align:"center",title:"合計欠費"}],C=[{key:"num1",align:"center",fixed:"left",title:"欠費級距(元)",width:150},{key:"num2",align:"center",title:"特殊筆數"},{key:"num3",align:"center",title:"特殊欠款"},{key:"num4",align:"center",title:"特殊狀況筆數"},{key:"num5",align:"center",title:"特殊狀況欠款"},{key:"num6",align:"center",title:"市府應收款(10元)"},{key:"num7",align:"center",title:"市府應收款(5元)"},{key:"num8",align:"center",title:"市府應收款(2元)"},{key:"num9",align:"center",title:"合計市府應收款"},{key:"num10",align:"center",title:"合計欠費"}];let g=[],f="",b=[];const U=(d,i)=>{g=[],f="",b=[];let c=[];g=[...d],f=i,r.value=="1"?c=[...T]:r.value=="2.0+2.0e"&&(c=[...C]),c.forEach(l=>{b.push(l.title)})},$=d=>{const i=new Date(d),c=new Date(2012,0,1),l=new Date(new Date().getFullYear()+1,0,0);return i<=c||i>=l},M=async()=>{try{p.value=!0,m.value=[];const d="https://report.youbike.com.tw/isauth/gcpfun",i={dataset_id:"data_analysis",year:y.value,city:v.value};r.value==1?i.table_id="arrearsall_report1":r.value=="2.0+2.0e"&&(i.table_id="arrearsall_report2");const c=await K.get(d,{params:i});if(p.value=!1,!c.data.data)return;c.data.data.forEach(l=>{const t={};switch(r.value=="1"?(t.num1=null,t.num2=l.CNT_real,t.num3=l.Total_real,t.num4=l.CNT_special,t.num5=l.Total_special,t.num6=l.gov10,t.num7=l.gov5,t.num8=l.gov,t.num9=l.total_arrearsall):r.value=="2.0+2.0e"&&(t.num1=null,t.num2=l.CNT_real,t.num3=l.Total_real,t.num4=l.CNT_special,t.num5=l.Total_special,t.num6=l.gov10,t.num7=l.gov5,t.num8=l.gov2,t.num9=l.gov,t.num10=l.total_arrearsall),l.amt_range){case 0:t.num1="0";break;case 1:t.num1="5";break;case 2:t.num1="10";break;case 3:t.num1="15";break;case 4:t.num1="20";break;case 5:t.num1="25";break;case 6:t.num1="30";break;case 7:t.num1="35";break;case 8:t.num1="40";break;case 9:t.num1="45";break;case 10:t.num1="50";break;case 11:t.num1="55-100";break;case 12:t.num1="105-200";break;case 13:t.num1="205-500";break;case 14:t.num1="505-1000";break;case 15:t.num1="1005-5000";break;case 16:t.num1="5005-9995";break;case 17:t.num1="9999以上";break;case 18:t.num1="臺大專區(200元以下)";break;case 19:t.num1="臺大專區(201元以上)";break;case 20:t.num1="總計";break;default:break}m.value.push(t),U(m.value,"欠費統計(金額區分)")})}catch(d){console.log(d)}},P=()=>{if(y.value){if(r.value=="請選擇"){h("系統不能為空");return}else if(v.value=="請選擇"){h("城市不能為空");return}}else{h("請選擇日期");return}r.value=="1"?k.value=1:r.value=="2.0+2.0e"&&(k.value=2),M()};return(d,i)=>(a(),n("div",q,[x(e(Y),{active:p.value,"onUpdate:active":i[0]||(i[0]=c=>p.value=c),"can-cancel":!1,"is-full-page":!0},null,8,["active"]),G,u("form",{class:L(["row mx-0",{"report-header":!e(E),"report-header-dark":e(E)}])},[u("div",I,[x(e(A),{class:"px-0","formatted-value":y.value,"onUpdate:formattedValue":i[1]||(i[1]=c=>y.value=c),type:"year",actions:null,"is-date-disabled":$,"value-format":"yyyy"},null,8,["formatted-value"])]),u("div",J,[O,u("div",Q,[D(u("select",{class:"form-select form-select-sm","aria-label":"car","onUpdate:modelValue":i[2]||(i[2]=c=>r.value=c),onChange:i[3]||(i[3]=c=>v.value="請選擇")},Z,544),[[H,r.value]])])]),u("div",ee,[te,u("div",ae,[D(u("select",{class:"form-select form-select-sm","aria-label":"car","onUpdate:modelValue":i[4]||(i[4]=c=>v.value=c)},[ne,r.value==1?(a(),n(S,{key:0},[e(s).includes(2)?(a(),n("option",oe,"台北市")):o("",!0),e(s).includes(3)?(a(),n("option",se,"新北市")):o("",!0),e(s).includes(4)?(a(),n("option",le,"桃園縣")):o("",!0),e(s).includes(5)?(a(),n("option",ie,"新竹市")):o("",!0),e(s).includes(7)?(a(),n("option",ue,"苗栗縣")):o("",!0),e(s).includes(8)?(a(),n("option",ce,"台中市")):o("",!0)],64)):r.value=="2.0+2.0e"?(a(),n(S,{key:1},[e(s).includes(2)?(a(),n("option",re,"台北市2.0")):o("",!0),e(s).includes(2)?(a(),n("option",de,"台北市2.0E")):o("",!0),e(s).includes(3)?(a(),n("option",me,"新北市2.0")):o("",!0),e(s).includes(3)?(a(),n("option",_e,"新北市2.0E")):o("",!0),e(s).includes(4)?(a(),n("option",ve,"桃園市2.0")):o("",!0),e(s).includes(4)?(a(),n("option",pe,"桃園市2.0E")):o("",!0),e(s).includes(5)?(a(),n("option",ke,"新竹市2.0")):o("",!0),e(s).includes(5)?(a(),n("option",ye,"新竹市2.0E")):o("",!0),e(s).includes(6)?(a(),n("option",he,"新竹縣2.0")):o("",!0),e(s).includes(6)?(a(),n("option",ge,"新竹縣2.0E")):o("",!0),e(s).includes(20)?(a(),n("option",fe,"竹科2.0")):o("",!0),e(s).includes(20)?(a(),n("option",be,"竹科2.0E")):o("",!0),e(s).includes(7)?(a(),n("option",xe,"苗栗縣2.0")):o("",!0),e(s).includes(7)?(a(),n("option",Ee,"苗栗縣2.0E")):o("",!0),e(s).includes(8)?(a(),n("option",we,"台中市2.0")):o("",!0),e(s).includes(8)?(a(),n("option",Te,"台中市2.0E")):o("",!0),e(s).includes(12)?(a(),n("option",Ce,"嘉義市2.0")):o("",!0),e(s).includes(12)?(a(),n("option",Ne,"嘉義市2.0E")):o("",!0),e(s).includes(13)?(a(),n("option",De,"嘉義縣2.0")):o("",!0),e(s).includes(13)?(a(),n("option",He,"嘉義縣2.0E")):o("",!0),e(s).includes(14)?(a(),n("option",Se,"台南市2.0")):o("",!0),e(s).includes(14)?(a(),n("option",Ve,"台南市2.0E")):o("",!0),e(s).includes(15)?(a(),n("option",ze,"高雄市2.0")):o("",!0),e(s).includes(15)?(a(),n("option",Be,"高雄市2.0E")):o("",!0),e(s).includes(16)?(a(),n("option",Ue,"屏東縣2.0")):o("",!0),e(s).includes(16)?(a(),n("option",$e,"屏東縣2.0E")):o("",!0),e(s).includes(19)?(a(),n("option",Me,"台東縣2.0")):o("",!0),e(s).includes(19)?(a(),n("option",Pe,"台東縣2.0E")):o("",!0)],64)):o("",!0)],512),[[H,v.value]])])]),u("div",Fe,[u("button",{type:"button",class:"btn btn-success text-light mt-3 mt-md-0 col-md-auto mx-md-2",onClick:P}," 搜尋 "),x(j,{class:"btn btn-primary text-light mt-3 mt-md-0 col-md-auto mx-md-2",data:e(g),name:e(f),header:e(b)},null,8,["data","name","header"])])],2),m.value.length>0&&k.value==1?(a(),V(e(z),{key:0,ref_key:"dataTable",ref:w,data:m.value,columns:T,pagination:{pageSize:15},"max-height":600,"scroll-x":1e3,bordered:!1,size:"small","single-line":!1,striped:""},null,8,["data"])):o("",!0),m.value.length>0&&k.value==2?(a(),V(e(z),{key:1,ref_key:"dataTable",ref:w,size:"small",data:m.value,columns:C,pagination:{pageSize:15},"max-height":600,bordered:!1,"single-line":!1,"scroll-x":1e3,striped:""},null,8,["data"])):o("",!0)]))}};export{Ie as default};
