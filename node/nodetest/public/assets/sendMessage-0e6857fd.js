import{_ as M,i as V,r as l,z as j,o as p,c as _,b as B,d as E,e,l as x,b2 as w,n as I,b4 as v,j as m,F as U,b3 as F,k as H,L as S,s as P,t as R}from"./index-e8db8460.js";const c=u=>(P("data-v-84369d96"),u=u(),R(),u),z={class:"container-fluid"},A=c(()=>e("div",{class:"row mx-0 mb-3"},[e("h1",{class:"report-h1 fw-bold"},"簡訊發送")],-1)),D={novalidate:""},W={class:"row border-3 border py-3 mb-3 rounded"},G=c(()=>e("div",{class:"btn-toolbar mb-3",role:"toolbar","aria-label":"Toolbar with button groups"},null,-1)),O=c(()=>e("h2",{class:"fs-5 fw-bold mb-2"},"1.輸入電話號碼",-1)),q={class:"col-auto mb-1"},J={class:"invalid-feedback"},K={class:"row border-3 border py-3 rounded mb-3"},Q={class:"row mb-1"},X=c(()=>e("div",{class:"btn-toolbar mb-3",role:"toolbar","aria-label":"Toolbar with button groups"},null,-1)),Y=c(()=>e("h2",{class:"fs-5 fw-bold mb-2"},"2.輸入簡訊內容",-1)),Z={class:"col-10"},ee={class:"col-2 d-flex flex-column justify-content-center"},te={class:"text-center gradient-bg mb-1"},se={class:"text-danger"},oe=c(()=>e("p",{class:"text-center gradient-bg mb-1"},[e("span",{class:"text-danger"},"0"),m("點 ")],-1)),ne=c(()=>e("p",{class:"text-center gradient-bg mb-1"},[e("span",{class:"text-success"},"短 "),m("簡訊 ")],-1)),ae={class:"row mb-2"},le={class:"col-12"},ce={class:"punctuation-panel"},re=["onClick"],ie={__name:"sendMessage",setup(u){const y=V("$swal");async function C(n){y({icon:"error",title:`${n}`,showConfirmButton:!1})}const k=l(["，","。","？","！","「","」","『","』","︰","（","）","《","》","〈","〉","［","］","｛","｝","：","；","‘","’","“","”","、","。","·","……","—","《","》","（","）","【","】","+","-","±","÷","×","=","≠","%","∞","√"]);function T(n){r.value+=n}const h=l(!1);l(null);const r=l(""),i=l(""),b=l(""),a=l("");function N(){const o=["0912345678,","0987654321,","0988888888,","0977777777,"].join(`
`),t=new Blob([o],{type:"text/plain;charset=utf-8;"}),s=document.createElement("a"),d=URL.createObjectURL(t);s.href=d,s.download="電話號碼範例檔.txt",document.body.appendChild(s),s.click(),document.body.removeChild(s)}const $=async n=>{const o=n.target.files[0];if(!o||!o.name.toLowerCase().endsWith(".txt")){await C("請上傳txt文件");return}const t=new FileReader;t.onload=function(s){const d=s.target.result;i.value=d},t.readAsText(o)};function f(n){const o=n.replace(/,$/,"");return/^09\d{8}$/.test(o)}function g(n){return a.value=!0,b.value="",n.split(`
`).forEach((t,s)=>{t.endsWith(",")||(b.value+=`第${s+1}行格式錯誤，應以逗號結尾。
`,a.value=!1),f(t)||(b.value+=`第${s+1}行手機格式錯誤。
`,a.value=!1)}),a.value}j(i,n=>{g(n)});const L=async()=>{if(!g(i.value))return;const t=i.value.split(`
`).map(s=>s.replace(/,$/,"").trim()).filter(f);console.log("Valid phone numbers: ",t),console.log(r.value);try{const s="https://report.youbike.com.tw/sms/send",d=await H.post(s,{phone:t,yb_id:"GB3192",message:r.value});console.log(d)}catch(s){console.log(s)}};return(n,o)=>(p(),_("div",z,[B(E(S),{active:h.value,"onUpdate:active":o[0]||(o[0]=t=>h.value=t),"can-cancel":!1,"is-full-page":!0},null,8,["active"]),A,e("form",D,[e("div",W,[G,O,e("div",q,[e("input",{type:"file",class:"form-control",onChange:$,ref:"file"},null,544)]),e("div",{class:"col-auto mb-1"},[e("button",{type:"button",class:"btn btn-primary fw-bold",onClick:N}," 下載範例檔案 ")]),e("div",null,[x(e("textarea",{class:I({"form-control":!0,"is-valid":a.value,"is-invalid":a.value!==""&&!a.value}),placeholder:`0912345678,\r
0987654321,\r
0966666666,`,id:"floatingTextarea",style:{height:"100px"},"onUpdate:modelValue":o[1]||(o[1]=t=>i.value=t)},null,2),[[w,i.value]]),e("div",J,v(b.value),1)])]),e("div",K,[e("div",Q,[X,Y,e("div",Z,[x(e("textarea",{"onUpdate:modelValue":o[2]||(o[2]=t=>r.value=t),class:"form-control form-control-sm",placeholder:"輸入簡訊內容",id:"floatingTextarea",style:{height:"100px"}},null,512),[[w,r.value]])]),e("div",ee,[e("p",te,[e("span",se,v(r.value.length),1),m("字 ")]),oe,ne])]),e("div",ae,[e("div",le,[e("div",ce,[(p(!0),_(U,null,F(k.value,t=>(p(),_("button",{key:t,type:"button",class:"btn btn-sm me-1 mb-1 btn-outline-secondary",onClick:s=>T(t)},v(t),9,re))),128))])])])]),e("div",{class:"row d-flex justify-content-center"},[e("button",{class:"btn btn-danger btn-lg",style:{width:"200px"},type:"button",onClick:L}," 發送 ")])])]))}},ue=M(ie,[["__scopeId","data-v-84369d96"]]);export{ue as default};
