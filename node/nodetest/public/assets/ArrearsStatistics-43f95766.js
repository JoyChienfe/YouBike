import{i as E,u as M,r as _,o as a,c as l,b as x,d as t,e as u,k as D,v as V,F as z,l as n,n as Y,s as B,j}from"./index-3459458a.js";import{L as A}from"./index-fcaa1a70.js";import{_ as K}from"./OutputExcel-14eb8bfa.js";import{N as P}from"./DatePicker-0f56cdd4.js";import{N as S}from"./DataTable-83b67cc2.js";import"./xlsx-bd534488.js";import"./Forward-c5c87e0a.js";import"./Input-c173e393.js";import"./get-slot-1efb97e5.js";const q={class:"container-fluid px-0"},G=u("div",{class:"row mx-0"},[u("h1",{class:"report-h1 fw-bold"},"欠費統計(金額區分)")],-1),I={class:"row mx-0 mx-md-2 align-items-center col-md-auto"},J={class:"row mx-0 mx-md-2 align-items-center col-md-auto col-12"},O=u("label",{class:"col-md-auto col-form-label px-0 px-md-2 fw-bolder"},"系統別:",-1),Q={class:"col-md-auto px-0"},R=u("option",{selected:"",disabled:""},"請選擇",-1),W=u("option",{value:"1"},"1.0",-1),X=u("option",{value:"2.0+2.0e"},"2.0+2.0E",-1),Z=[R,W,X],ee={class:"row mx-0 mx-md-2 align-items-center col-md-auto col-12"},te=u("label",{class:"col-md-auto col-form-label px-0 px-md-2 fw-bolder"},"城市:",-1),ae={class:"col-md-auto px-0"},se=u("option",{selected:"",disabled:""},"請選擇",-1),le={key:0,value:"Taipei"},ne={key:1,value:"Newtaipei"},oe={key:2,value:"Taoyuan"},ie={key:3,value:"Hsinchu"},ue={key:4,value:"Miaoli"},ce={key:5,value:"Taichung"},re={key:0,value:"Taipei2"},de={key:1,value:"Newtaipei2"},me={key:2,value:"Taoyuan2"},_e={key:3,value:"Taoyuan2E"},ve={key:4,value:"Hsinchu2"},pe={key:5,value:"Hsinchu_Country2"},ke={key:6,value:"Miaoli2"},ye={key:7,value:"Taichung2"},he={key:8,value:"Taichung2E"},fe={key:9,value:"Chiayi2"},ge={key:10,value:"Chiayi2E"},be={key:11,value:"Kaohsiung2"},xe={key:12,value:"Kaohsiung2E"},we={class:"row mx-0 mx-md-2 align-items-center col-md-auto col-12"},Fe={__name:"ArrearsStatistics",setup(Te){const w=E("ischange"),U=E("$swal");async function h(d){U({icon:"error",title:`${d}`,showConfirmButton:!1})}const o=M().citys,p=_(!1),T=_(),r=_("請選擇"),k=_(null),m=_([]),y=_(),v=_("請選擇"),N=[{key:"num1",align:"center",fixed:"left",title:"欠費級距(元)",width:150},{key:"num2",align:"center",title:"真實筆數"},{key:"num3",align:"center",title:"真實欠款"},{key:"num4",align:"center",title:"特殊狀況筆數"},{key:"num5",align:"center",title:"特殊狀況欠款"},{key:"num6",align:"center",title:"市府應收款(10元)"},{key:"num7",align:"center",title:"市府應收款(5元)"},{key:"num8",align:"center",title:"合計市府應收款"},{key:"num9",align:"center",title:"合計欠費"}],C=[{key:"num1",align:"center",fixed:"left",title:"欠費級距(元)",width:150},{key:"num2",align:"center",title:"特殊筆數"},{key:"num3",align:"center",title:"特殊欠款"},{key:"num4",align:"center",title:"特殊狀況筆數"},{key:"num5",align:"center",title:"特殊狀況欠款"},{key:"num6",align:"center",title:"市府應收款(10元)"},{key:"num7",align:"center",title:"市府應收款(5元)"},{key:"num8",align:"center",title:"市府應收款(2元)"},{key:"num9",align:"center",title:"合計市府應收款"},{key:"num10",align:"center",title:"合計欠費"}];let f=[],g="",b=[];const $=(d,i)=>{f=[],g="",b=[];let c=[];f=[...d],g=i,r.value=="1"?c=[...N]:r.value=="2.0+2.0e"&&(c=[...C]),c.forEach(s=>{b.push(s.title)})},F=d=>{const i=new Date(d),c=new Date(2012,0,1),s=new Date(new Date().getFullYear()+1,0,0);return i<=c||i>=s},H=async()=>{try{p.value=!0,m.value=[];const d="https://report.youbike.com.tw/isauth/gcpfun",i={dataset_id:"data_analysis",year:y.value,city:v.value};r.value==1?i.table_id="arrearsall_report1":r.value=="2.0+2.0e"&&(i.table_id="arrearsall_report2");const c=await j.get(d,{params:i});if(p.value=!1,!c.data.data)return;c.data.data.forEach(s=>{const e={};switch(r.value=="1"?(e.num1=null,e.num2=s.CNT_real,e.num3=s.Total_real,e.num4=s.CNT_special,e.num5=s.Total_special,e.num6=s.gov10,e.num7=s.gov5,e.num8=s.gov,e.num9=s.total_arrearsall):r.value=="2.0+2.0e"&&(e.num1=null,e.num2=s.CNT_real,e.num3=s.Total_real,e.num4=s.CNT_special,e.num5=s.Total_special,e.num6=s.gov10,e.num7=s.gov5,e.num8=s.gov2,e.num9=s.gov,e.num10=s.total_arrearsall),s.amt_range){case 0:e.num1="0";break;case 1:e.num1="5";break;case 2:e.num1="10";break;case 3:e.num1="15";break;case 4:e.num1="20";break;case 5:e.num1="25";break;case 6:e.num1="30";break;case 7:e.num1="35";break;case 8:e.num1="40";break;case 9:e.num1="45";break;case 10:e.num1="50";break;case 11:e.num1="55-100";break;case 12:e.num1="105-200";break;case 13:e.num1="205-500";break;case 14:e.num1="505-1000";break;case 15:e.num1="1005-5000";break;case 16:e.num1="5005-9995";break;case 17:e.num1="9999以上";break;case 18:e.num1="臺大專區(200元以下)";break;case 19:e.num1="臺大專區(201元以上)";break;case 20:e.num1="總計";break;default:break}m.value.push(e),$(m.value,"欠費統計(金額區分)")})}catch(d){console.log(d)}},L=()=>{if(y.value){if(r.value=="請選擇"){h("系統不能為空");return}else if(v.value=="請選擇"){h("城市不能為空");return}}else{h("請選擇日期");return}r.value=="1"?k.value=1:r.value=="2.0+2.0e"&&(k.value=2),H()};return(d,i)=>(a(),l("div",q,[x(t(A),{active:p.value,"onUpdate:active":i[0]||(i[0]=c=>p.value=c),"can-cancel":!1,"is-full-page":!0},null,8,["active"]),G,u("form",{class:Y(["row mx-0",{"report-header":!t(w),"report-header-dark":t(w)}])},[u("div",I,[x(t(P),{class:"px-0","formatted-value":y.value,"onUpdate:formattedValue":i[1]||(i[1]=c=>y.value=c),type:"year",actions:null,"is-date-disabled":F,"value-format":"yyyy"},null,8,["formatted-value"])]),u("div",J,[O,u("div",Q,[D(u("select",{class:"form-select form-select-sm","aria-label":"car","onUpdate:modelValue":i[2]||(i[2]=c=>r.value=c),onChange:i[3]||(i[3]=c=>v.value="請選擇")},Z,544),[[V,r.value]])])]),u("div",ee,[te,u("div",ae,[D(u("select",{class:"form-select form-select-sm","aria-label":"car","onUpdate:modelValue":i[4]||(i[4]=c=>v.value=c)},[se,r.value==1?(a(),l(z,{key:0},[t(o).includes(2)?(a(),l("option",le," 台北市 ")):n("",!0),t(o).includes(3)?(a(),l("option",ne," 新北市 ")):n("",!0),t(o).includes(4)?(a(),l("option",oe," 桃園縣 ")):n("",!0),t(o).includes(5)?(a(),l("option",ie," 新竹市 ")):n("",!0),t(o).includes(7)?(a(),l("option",ue," 苗栗縣 ")):n("",!0),t(o).includes(8)?(a(),l("option",ce," 台中市 ")):n("",!0)],64)):r.value=="2.0+2.0e"?(a(),l(z,{key:1},[t(o).includes(2)?(a(),l("option",re," 台北市2.0 ")):n("",!0),t(o).includes(3)?(a(),l("option",de," 新北市2.0 ")):n("",!0),t(o).includes(4)?(a(),l("option",me," 桃園市2.0 ")):n("",!0),t(o).includes(4)?(a(),l("option",_e," 桃園市2.0E ")):n("",!0),t(o).includes(5)?(a(),l("option",ve," 新竹市2.0 ")):n("",!0),t(o).includes(6)?(a(),l("option",pe," 新竹縣2.0 ")):n("",!0),t(o).includes(7)?(a(),l("option",ke," 苗栗縣2.0 ")):n("",!0),t(o).includes(8)?(a(),l("option",ye," 台中市2.0 ")):n("",!0),t(o).includes(8)?(a(),l("option",he," 台中市2.0E ")):n("",!0),t(o).includes(12)?(a(),l("option",fe," 嘉義市2.0 ")):n("",!0),t(o).includes(12)?(a(),l("option",ge," 嘉義市2.0E ")):n("",!0),t(o).includes(15)?(a(),l("option",be," 高雄市2.0 ")):n("",!0),t(o).includes(15)?(a(),l("option",xe," 高雄市2.0E ")):n("",!0)],64)):n("",!0)],512),[[V,v.value]])])]),u("div",we,[u("button",{type:"button",class:"btn btn-success text-light mt-3 mt-md-0 col-md-auto mx-md-2",onClick:L}," 搜尋 "),x(K,{class:"btn btn-primary text-light mt-3 mt-md-0 col-md-auto mx-md-2",data:t(f),name:t(g),header:t(b)},null,8,["data","name","header"])])],2),m.value.length>0&&k.value==1?(a(),B(t(S),{key:0,ref_key:"dataTable",ref:T,data:m.value,columns:N,pagination:{pageSize:15},"max-height":600,"scroll-x":1e3,bordered:!1,size:"small","single-line":!1,striped:""},null,8,["data"])):n("",!0),m.value.length>0&&k.value==2?(a(),B(t(S),{key:1,ref_key:"dataTable",ref:T,size:"small",data:m.value,columns:C,pagination:{pageSize:15},"max-height":600,bordered:!1,"single-line":!1,"scroll-x":1e3,striped:""},null,8,["data"])):n("",!0)]))}};export{Fe as default};
