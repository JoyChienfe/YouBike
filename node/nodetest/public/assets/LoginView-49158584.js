import{i as V,u as B,r as l,a as D,o as K,c as L,b as a,d as s,e as u,w as r,N as C,f as v,g as I,h as $,j}from"./index-3459458a.js";import{L as R}from"./index-fcaa1a70.js";import{N as m,a as T}from"./FormItem-268ef737.js";import{N as w}from"./Input-c173e393.js";const q={class:"container"},F={class:"row justify-content-center"},P={class:"col-12 col-md-8 col-lg-6 border border-3 py-3 px-3 rounded-3"},S=u("div",{class:"my-3"},[u("img",{src:"https://www.youbike.com.tw/region/assets/images/logo.svg",class:"img-fluid",alt:"logo圖片"})],-1),z=u("div",null,"英文只允許大寫",-1),Q={__name:"LoginView",setup(A){const f=V("$swal");async function g(){f({title:"帳號密碼錯誤"})}const _=B(),n=l(!1),y=D(),d=l(null),o=l({account:"",password:""}),h={account:[{required:!0,message:"請輸入帳號",trigger:"blur"}],password:[{required:!0,message:"請輸入密碼",trigger:"blur"}]},c=l(!1),b=()=>{c.value=!0,o.value.account=o.value.account.toUpperCase()},i=async()=>{try{n.value=!0,await d.value.validate();const{account:p,password:e}=o.value,t="https://report.youbike.com.tw",N={account:p,password:e},k=(await j.post(`${t}/isauth/login`,N)).data.token,x=new Date,U=new Date(x.getTime()+8*60*60*1e3).toGMTString();document.cookie=`youbike=${k}; expires=${U};path=/;`,_.getdata(),n.value=!1,y.push("/")}catch{n.value=!1,g()}};return(p,e)=>(K(),L("div",q,[a(s(R),{active:n.value,"onUpdate:active":e[0]||(e[0]=t=>n.value=t),"can-cancel":!1,"is-full-page":!0},null,8,["active"]),u("div",F,[u("div",P,[S,a(s(T),{ref_key:"formRef",ref:d,rules:h,size:"large",model:o.value},{default:r(()=>[a(s(m),{label:"帳號",path:"account"},{default:r(()=>[a(s(C),{trigger:"click",show:c.value,"onUpdate:show":e[2]||(e[2]=t=>c.value=t)},{trigger:r(()=>[a(s(w),{value:o.value.account,"onUpdate:value":e[1]||(e[1]=t=>o.value.account=t),placeholder:"請輸入帳號",onInput:b,onKeyup:v(i,["enter"]),"input-props":{autocomplete:"username"}},null,8,["value","onKeyup"])]),default:r(()=>[z]),_:1},8,["show"])]),_:1}),a(s(m),{label:"密碼",path:"password"},{default:r(()=>[a(s(w),{value:o.value.password,"onUpdate:value":e[3]||(e[3]=t=>o.value.password=t),placeholder:"請輸入密碼",type:"password","show-password-on":"mousedown",onKeyup:v(i,["enter"]),"input-props":{autocomplete:"current-password"}},null,8,["value","onKeyup"])]),_:1}),a(s(I),{"attr-type":"button",type:"primary",onClick:i,class:"col-12 col-md-2"},{default:r(()=>[$(" 送出 ")]),_:1})]),_:1},8,["model"])])])]))}};export{Q as default};
