import{a4 as De,ah as k,d0 as et,d1 as tt,du as at,ca as lt,bF as nt,bD as he,bH as it,bI as Ne,b_ as ot,c0 as st,r as w,bc as rt,b$ as ut,c1 as L,x as te,c2 as dt,W as ct,dv as ft,bS as ge,c6 as be,c3 as ye,c9 as we,cu as _e,dw as mt,cb as H,ax as vt,_ as Be,i as W,o as Y,c as J,b as o,d as r,w as p,d7 as Me,e as f,N as Ce,dx as $e,g as G,h as U,F as ae,p as Se,q as ke,j as le,t as pt,u as ht,aN as gt,aU as bt,s as yt,dy as wt,dz as _t}from"./index-3459458a.js";import{L as ve}from"./index-fcaa1a70.js";import{A as Re}from"./AlertCircle-5f910865.js";import{N as z}from"./Input-c173e393.js";import{a as Ee,N as F}from"./FormItem-268ef737.js";import{N as Ae}from"./Modal-52cdf636.js";import{N as xt}from"./DataTable-83b67cc2.js";import"./Warning-fee88f9e.js";import"./get-slot-1efb97e5.js";import"./Forward-c5c87e0a.js";const Vt=De({name:"Remove",render(){return k("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},k("line",{x1:"400",y1:"256",x2:"112",y2:"256",style:`
        fill: none;
        stroke: currentColor;
        stroke-linecap: round;
        stroke-linejoin: round;
        stroke-width: 32px;
      `}))}}),It=e=>{const{textColorDisabled:v}=e;return{iconColorDisabled:v}},Dt=et({name:"InputNumber",common:tt,peers:{Button:at,Input:lt},self:It}),Nt=Dt;function Bt(e){return e==null||typeof e=="string"&&e.trim()===""?null:Number(e)}function Mt(e){return e.includes(".")&&(/^(-)?\d+.*(\.|0)$/.test(e)||/^\.\d+$/.test(e))}function fe(e){return e==null?!0:!Number.isNaN(e)}function xe(e,v){return e==null?"":v===void 0?String(e):e.toFixed(v)}function me(e){if(e===null)return null;if(typeof e=="number")return e;{const v=Number(e);return Number.isNaN(v)?null:v}}const Ct=nt([he("input-number-suffix",`
 display: inline-block;
 margin-right: 10px;
 `),he("input-number-prefix",`
 display: inline-block;
 margin-left: 10px;
 `)]),Ve=800,Ie=100,$t=Object.assign(Object.assign({},Ne.props),{autofocus:Boolean,loading:{type:Boolean,default:void 0},placeholder:String,defaultValue:{type:Number,default:null},value:Number,step:{type:[Number,String],default:1},min:[Number,String],max:[Number,String],size:String,disabled:{type:Boolean,default:void 0},validator:Function,bordered:{type:Boolean,default:void 0},showButton:{type:Boolean,default:!0},buttonPlacement:{type:String,default:"right"},readonly:Boolean,clearable:Boolean,keyboard:{type:Object,default:{}},updateValueOnInput:{type:Boolean,default:!0},parse:Function,format:Function,precision:Number,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onChange:[Function,Array]}),Te=De({name:"InputNumber",props:$t,setup(e){const{mergedBorderedRef:v,mergedClsPrefixRef:c,mergedRtlRef:h}=it(e),g=Ne("InputNumber","-input-number",Ct,Nt,e,c),{localeRef:a}=ot("InputNumber"),S=st(e),{mergedSizeRef:N,mergedDisabledRef:C,mergedStatusRef:R}=S,x=w(null),B=w(null),$=w(null),I=w(e.defaultValue),P=rt(e,"value"),M=ut(P,I),D=w(""),y=t=>{const n=String(t).split(".")[1];return n?n.length:0},d=t=>{const n=[e.min,e.max,e.step,t].map(m=>m===void 0?0:y(m));return Math.max(...n)},u=L(()=>{const{placeholder:t}=e;return t!==void 0?t:a.value.placeholder}),i=L(()=>{const t=me(e.step);return t!==null?t===0?1:Math.abs(t):1}),l=L(()=>{const t=me(e.min);return t!==null?t:null}),s=L(()=>{const t=me(e.max);return t!==null?t:null}),b=t=>{const{value:n}=M;if(t===n){E();return}const{"onUpdate:value":m,onUpdateValue:_,onChange:A}=e,{nTriggerFormInput:T,nTriggerFormChange:j}=S;A&&H(A,t),_&&H(_,t),m&&H(m,t),I.value=t,T(),j()},V=({offset:t,doUpdateIfValid:n,fixPrecision:m,isInputing:_})=>{const{value:A}=D;if(_&&Mt(A))return!1;const T=(e.parse||Bt)(A);if(T===null)return n&&b(null),null;if(fe(T)){const j=y(T),{precision:X}=e;if(X!==void 0&&X<j&&!m)return!1;let O=parseFloat((T+t).toFixed(X??d(T)));if(fe(O)){const{value:de}=s,{value:ce}=l;if(de!==null&&O>de){if(!n||_)return!1;O=de}if(ce!==null&&O<ce){if(!n||_)return!1;O=ce}return e.validator&&!e.validator(O)?!1:(n&&b(O),O)}}return!1},E=()=>{const{value:t}=M;if(fe(t)){const{format:n,precision:m}=e;n?D.value=n(t):t===null||m===void 0||y(t)>m?D.value=xe(t,void 0):D.value=xe(t,m)}else D.value=String(t)};E();const Q=L(()=>V({offset:0,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})===!1),ne=L(()=>{const{value:t}=M;if(e.validator&&t===null)return!1;const{value:n}=i;return V({offset:-n,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1}),ie=L(()=>{const{value:t}=M;if(e.validator&&t===null)return!1;const{value:n}=i;return V({offset:+n,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1});function Fe(t){const{onFocus:n}=e,{nTriggerFormFocus:m}=S;n&&H(n,t),m()}function Pe(t){var n,m;if(t.target===((n=x.value)===null||n===void 0?void 0:n.wrapperElRef))return;const _=V({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0});if(_!==!1){const j=(m=x.value)===null||m===void 0?void 0:m.inputElRef;j&&(j.value=String(_||"")),M.value===_&&E()}else E();const{onBlur:A}=e,{nTriggerFormBlur:T}=S;A&&H(A,t),T(),vt(()=>{E()})}function Le(t){const{onClear:n}=e;n&&H(n,t)}function oe(){const{value:t}=ie;if(!t){ue();return}const{value:n}=M;if(n===null)e.validator||b(pe());else{const{value:m}=i;V({offset:m,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}function se(){const{value:t}=ne;if(!t){re();return}const{value:n}=M;if(n===null)e.validator||b(pe());else{const{value:m}=i;V({offset:-m,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}const ze=Fe,je=Pe;function pe(){if(e.validator)return null;const{value:t}=l,{value:n}=s;return t!==null?Math.max(0,t):n!==null?Math.min(0,n):0}function He(t){Le(t),b(null)}function Ye(t){var n,m,_;!((n=$.value)===null||n===void 0)&&n.$el.contains(t.target)&&t.preventDefault(),!((m=B.value)===null||m===void 0)&&m.$el.contains(t.target)&&t.preventDefault(),(_=x.value)===null||_===void 0||_.activate()}let q=null,K=null,Z=null;function re(){Z&&(window.clearTimeout(Z),Z=null),q&&(window.clearInterval(q),q=null)}function ue(){ee&&(window.clearTimeout(ee),ee=null),K&&(window.clearInterval(K),K=null)}function We(){re(),Z=window.setTimeout(()=>{q=window.setInterval(()=>{se()},Ie)},Ve),be("mouseup",document,re,{once:!0})}let ee=null;function Ge(){ue(),ee=window.setTimeout(()=>{K=window.setInterval(()=>{oe()},Ie)},Ve),be("mouseup",document,ue,{once:!0})}const qe=()=>{K||oe()},Ke=()=>{q||se()};function Xe(t){var n,m;if(t.key==="Enter"){if(t.target===((n=x.value)===null||n===void 0?void 0:n.wrapperElRef))return;V({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&((m=x.value)===null||m===void 0||m.deactivate())}else if(t.key==="ArrowUp"){if(!ie.value||e.keyboard.ArrowUp===!1)return;t.preventDefault(),V({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&oe()}else if(t.key==="ArrowDown"){if(!ne.value||e.keyboard.ArrowDown===!1)return;t.preventDefault(),V({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&se()}}function Je(t){D.value=t,e.updateValueOnInput&&!e.format&&!e.parse&&e.precision===void 0&&V({offset:0,doUpdateIfValid:!0,isInputing:!0,fixPrecision:!1})}te(M,()=>{E()});const Qe={focus:()=>{var t;return(t=x.value)===null||t===void 0?void 0:t.focus()},blur:()=>{var t;return(t=x.value)===null||t===void 0?void 0:t.blur()}},Ze=dt("InputNumber",h,c);return Object.assign(Object.assign({},Qe),{rtlEnabled:Ze,inputInstRef:x,minusButtonInstRef:B,addButtonInstRef:$,mergedClsPrefix:c,mergedBordered:v,uncontrolledValue:I,mergedValue:M,mergedPlaceholder:u,displayedValueInvalid:Q,mergedSize:N,mergedDisabled:C,displayedValue:D,addable:ie,minusable:ne,mergedStatus:R,handleFocus:ze,handleBlur:je,handleClear:He,handleMouseDown:Ye,handleAddClick:qe,handleMinusClick:Ke,handleAddMousedown:Ge,handleMinusMousedown:We,handleKeyDown:Xe,handleUpdateDisplayedValue:Je,mergedTheme:g,inputThemeOverrides:{paddingSmall:"0 8px 0 10px",paddingMedium:"0 8px 0 12px",paddingLarge:"0 8px 0 14px"},buttonThemeOverrides:ct(()=>{const{self:{iconColorDisabled:t}}=g.value,[n,m,_,A]=ft(t);return{textColorTextDisabled:`rgb(${n}, ${m}, ${_})`,opacityDisabled:`${A}`}})})},render(){const{mergedClsPrefix:e,$slots:v}=this,c=()=>k(_e,{text:!0,disabled:!this.minusable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleMinusClick,onMousedown:this.handleMinusMousedown,ref:"minusButtonInstRef"},{icon:()=>ye(v["minus-icon"],()=>[k(we,{clsPrefix:e},{default:()=>k(Vt,null)})])}),h=()=>k(_e,{text:!0,disabled:!this.addable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleAddClick,onMousedown:this.handleAddMousedown,ref:"addButtonInstRef"},{icon:()=>ye(v["add-icon"],()=>[k(we,{clsPrefix:e},{default:()=>k(mt,null)})])});return k("div",{class:[`${e}-input-number`,this.rtlEnabled&&`${e}-input-number--rtl`]},k(z,{ref:"inputInstRef",autofocus:this.autofocus,status:this.mergedStatus,bordered:this.mergedBordered,loading:this.loading,value:this.displayedValue,onUpdateValue:this.handleUpdateDisplayedValue,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,builtinThemeOverrides:this.inputThemeOverrides,size:this.mergedSize,placeholder:this.mergedPlaceholder,disabled:this.mergedDisabled,readonly:this.readonly,textDecoration:this.displayedValueInvalid?"line-through":void 0,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onClear:this.handleClear,clearable:this.clearable,internalLoadingBeforeSuffix:!0},{prefix:()=>{var g;return this.showButton&&this.buttonPlacement==="both"?[c(),ge(v.prefix,a=>a?k("span",{class:`${e}-input-number-prefix`},a):null)]:(g=v.prefix)===null||g===void 0?void 0:g.call(v)},suffix:()=>{var g;return this.showButton?[ge(v.suffix,a=>a?k("span",{class:`${e}-input-number-suffix`},a):null),this.buttonPlacement==="right"?c():null,h()]:(g=v.suffix)===null||g===void 0?void 0:g.call(v)}}))}});const Ue=e=>(Se("data-v-45405a0f"),e=e(),ke(),e),St={class:"fw-bold"},kt=Ue(()=>f("div",{class:"row fs-4 mb-3"},[f("div",{class:"col"},"新增狀態")],-1)),Rt={class:"row"},Et={class:"col-6"},At={class:"col-6"},Tt=Ue(()=>f("span",{style:{"font-weight":"700"}},[U("未保養狀態 => 天"),f("br"),U("其他 => 分鐘")],-1)),Ut={class:"row"},Ot={class:"col-12 mb-3"},Ft={class:"col-12"},Pt={class:"row"},Lt={class:"col text-center"},zt={__name:"AddComponent",props:{Modal:{type:Boolean},title:{type:String},city:{type:String}},emits:["closeAddModal","submit"],setup(e,{emit:v}){const c=e,h=W("$swal");async function g(y){h({icon:"success",title:`${y}`,showConfirmButton:!1})}const a=w({time:null,textareaValue:null}),S={time:{validator(y,d){return d===null?new Error("分鐘/天 不能為空"):d<=0?new Error("分鐘/天 必須大於0"):!0},type:"number",trigger:["blur","input"]},textareaValue:{required:!0,validator(y,d){if(!d)return new Error("電子郵件不能為空");let u=!0,i=null;return d.split(`
`).forEach((s,b)=>{(s.charAt(s.length-1)!==","||s.indexOf("@")===-1)&&(i=b,u=!1)}),u?!0:new Error(`第${i+1}行格式錯誤`)},trigger:["blur","input"]}},N=w(!1);async function C(y){try{N.value=!0;const d="https://report.youbike.com.tw/mail/status";await le.post(d,y)}catch{throw new Error("新增狀態失敗")}finally{N.value=!1}}function R(){return{city:c.city,title:c.title,time:a.value.time,textareaValue:a.value.textareaValue.split(",").filter(d=>d).map(d=>d.replace(/\n/g,""))}}async function x(){try{return await $.value.validate(),"驗證成功"}catch{throw new Error("驗證失敗")}}const B=W("getData"),$=w(null);async function I(){try{await x();const y=R();await C(y),g("新增成功"),await B(),D()}catch(y){console.log(y)}}function P(){const i=a.value.textareaValue.split(`
`).map(l=>l.trim()).join(`
`);a.value.textareaValue=i}function M(){a.value.time=null,a.value.textareaValue=null}function D(){M(),v("closeAddModal")}return(y,d)=>(Y(),J(ae,null,[o(r(ve),{active:N.value,"onUpdate:active":d[0]||(d[0]=u=>N.value=u),"can-cancel":!1,"is-full-page":!0},null,8,["active"]),o(r(Ae),{show:c.Modal,"onUpdate:show":d[5]||(d[5]=u=>c.Modal=u)},{default:p(()=>[o(r(Me),{size:"medium",preset:"dialog"},{default:p(()=>[o(r(Ee),{ref_key:"formRef",ref:$,model:a.value,rules:S},{default:p(()=>[f("div",St,[kt,f("div",Rt,[f("div",Et,[o(r(F),{label:"系統:","label-style":"font-weight: 700; font-size:16px"},{default:p(()=>[o(r(z),{value:c.title,"onUpdate:value":d[1]||(d[1]=u=>c.title=u),disabled:!0},null,8,["value"])]),_:1})]),f("div",At,[o(r(F),{label:"城市:","label-style":"font-weight: 700; font-size:16px"},{default:p(()=>[o(r(z),{value:c.city,"onUpdate:value":d[2]||(d[2]=u=>c.city=u),disabled:!0},null,8,["value"])]),_:1})])]),o(r(Ce),{trigger:"hover"},{trigger:p(()=>[o(r($e),{size:"20",color:"#0e7a0d"},{default:p(()=>[o(r(Re))]),_:1})]),default:p(()=>[Tt]),_:1}),f("div",Ut,[f("div",Ot,[o(r(F),{path:"time",label:"分鐘 / 天","label-style":"font-weight: 700; font-size:16px",rules:"rules.time"},{default:p(()=>[o(r(Te),{value:a.value.time,"onUpdate:value":d[3]||(d[3]=u=>a.value.time=u),placeholder:"請輸入數字","show-button":!1},null,8,["value"])]),_:1})]),f("div",Ft,[o(r(F),{path:"textareaValue",label:"Email","label-style":"font-weight: 700; font-size:16px",rules:"rules.textareaValue"},{default:p(()=>[o(r(z),{size:"large",value:a.value.textareaValue,"onUpdate:value":d[4]||(d[4]=u=>a.value.textareaValue=u),onChange:P,placeholder:`IloveYouBike@gmail.com,
YouLoveYouBike@gmail.com,
WeLoveYouBike@gmail.com,
`,type:"textarea"},null,8,["value"])]),_:1})])])]),f("div",Pt,[f("div",Lt,[o(r(G),{type:"info",class:"me-3",onClick:I},{default:p(()=>[U("新增")]),_:1}),o(r(G),{type:"error",onClick:D},{default:p(()=>[U("取消")]),_:1})])])]),_:1},8,["model"])]),_:1})]),_:1},8,["show"])],64))}},jt=Be(zt,[["__scopeId","data-v-45405a0f"]]);const Oe=e=>(Se("data-v-44f6ef3b"),e=e(),ke(),e),Ht={class:"fw-bold"},Yt=Oe(()=>f("div",{class:"row fs-4 mb-3"},[f("div",{class:"col"},"編輯狀態")],-1)),Wt={class:"row"},Gt={class:"col-6"},qt={class:"col-6"},Kt=Oe(()=>f("span",{style:{"font-weight":"700"}},[U("未保養狀態 => 天"),f("br"),U("其他 => 分鐘")],-1)),Xt={class:"row"},Jt={class:"col-12 mb-3"},Qt={class:"col-12"},Zt={class:"row"},ea={class:"col text-center"},ta={__name:"editComponent",props:{Modal:{type:Boolean},editData:{type:Object}},emits:["closeEditModal","submit"],setup(e,{emit:v}){const c=e,h=W("$swal");async function g(u){h({icon:"success",title:`${u}`,showConfirmButton:!1})}const a=w({time:null,textareaValue:null}),S={time:{validator(u,i){return i===null?new Error("分鐘/天 不能為空"):i<=0?new Error("分鐘/天 必須大於0"):!0},type:"number",trigger:["blur","input"]},textareaValue:{required:!0,validator(u,i){if(!i)return new Error("電子郵件不能為空");let l=!0,s=null;return i.split(`
`).forEach((V,E)=>{(V.charAt(V.length-1)!==","||V.indexOf("@")===-1)&&(s=E,l=!1)}),l?!0:new Error(`第${s+1}行格式錯誤`)},trigger:["blur","input"]}},N=w(!1);async function C(u){try{N.value=!0;const i="https://report.youbike.com.tw/mail/status";console.log(u),await le.put(i,u)}catch{throw new Error("新增狀態失敗")}finally{N.value=!1}}function R(){return{newObj:{city:c.editData.city,title:c.editData.type,min:a.value.time,email:a.value.textareaValue.split(",").filter(i=>i).map(i=>i.replace(/\n/g,""))},oldData:d.value}}const x=w(null);async function B(){try{return await x.value.validate(),"驗證成功"}catch{throw new Error("驗證失敗")}}const $=W("getData");async function I(){try{await B();const u=R();await C(u),g("編輯成功"),await $(),D()}catch(u){console.log(u)}}function P(){const s=a.value.textareaValue.split(`
`).map(b=>b.trim()).join(`
`);a.value.textareaValue=s}function M(){a.value.time=null,a.value.textareaValue=null}function D(){M(),v("closeEditModal")}function y(u){let i="";return u.forEach((l,s)=>{console.log(l),s===u.length-1?i+=`${l},`:i+=`${l},
`}),i===","?null:i}const d=w();return te(()=>c.editData,()=>{d.value={city:c.editData.city,title:c.editData.type,min:parseInt(c.editData.min),mail:c.editData.mail},a.value.time=parseInt(c.editData.min),a.value.textareaValue=y(c.editData.mail)},{deep:!0}),(u,i)=>(Y(),J(ae,null,[o(r(ve),{active:N.value,"onUpdate:active":i[0]||(i[0]=l=>N.value=l),"can-cancel":!1,"is-full-page":!0},null,8,["active"]),o(r(Ae),{show:c.Modal,"onUpdate:show":i[5]||(i[5]=l=>c.Modal=l)},{default:p(()=>[o(r(Me),{size:"medium",preset:"dialog"},{default:p(()=>[o(r(Ee),{ref_key:"formRef",ref:x,model:a.value,rules:S},{default:p(()=>[f("div",Ht,[Yt,f("div",Wt,[f("div",Gt,[o(r(F),{label:"系統:","label-style":"font-weight: 700; font-size:16px"},{default:p(()=>[o(r(z),{value:c.editData.type,"onUpdate:value":i[1]||(i[1]=l=>c.editData.type=l),disabled:!0},null,8,["value"])]),_:1})]),f("div",qt,[o(r(F),{label:"城市:","label-style":"font-weight: 700; font-size:16px"},{default:p(()=>[o(r(z),{value:c.editData.city,"onUpdate:value":i[2]||(i[2]=l=>c.editData.city=l),disabled:!0},null,8,["value"])]),_:1})])]),o(r(Ce),{trigger:"hover"},{trigger:p(()=>[o(r($e),{size:"20",color:"#0e7a0d"},{default:p(()=>[o(r(Re))]),_:1})]),default:p(()=>[Kt]),_:1}),f("div",Xt,[f("div",Jt,[o(r(F),{path:"time",label:"分鐘 / 天","label-style":"font-weight: 700; font-size:16px",rules:"rules.time"},{default:p(()=>[o(r(Te),{value:a.value.time,"onUpdate:value":i[3]||(i[3]=l=>a.value.time=l),placeholder:"請輸入數字","show-button":!1},null,8,["value"])]),_:1})]),f("div",Qt,[o(r(F),{path:"textareaValue",label:"Email","label-style":"font-weight: 700; font-size:16px",rules:"rules.textareaValue"},{default:p(()=>[o(r(z),{size:"large",value:a.value.textareaValue,"onUpdate:value":i[4]||(i[4]=l=>a.value.textareaValue=l),onChange:P,placeholder:`IloveYouBike@gmail.com,
YouLoveYouBike@gmail.com,
WeLoveYouBike@gmail.com,
`,type:"textarea"},null,8,["value"])]),_:1})])])]),f("div",Zt,[f("div",ea,[o(r(G),{type:"info",class:"me-3",onClick:I},{default:p(()=>[U("更新")]),_:1}),o(r(G),{type:"error",onClick:D},{default:p(()=>[U("取消")]),_:1})])])]),_:1},8,["model"])]),_:1})]),_:1},8,["show"])],64))}},aa=Be(ta,[["__scopeId","data-v-44f6ef3b"]]),la={class:"row"},na={class:"col-3 mb-3"},ia={class:"row mb-2"},oa={class:"col"},sa={class:"row pb-7"},ra={class:"col text-center"},ua={__name:"SendComponent",props:{maildata:{type:Array},city:{type:String}},setup(e){const v=e,c=W("getData"),h=W("$swal");async function g(l){(await h({title:"確定刪除嗎?",text:"刪除將不可復原",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"刪除",cancelButtonText:"取消"})).isConfirmed&&(await S(l),await c(),await h.fire({title:"刪除成功",icon:"success"}))}const a=w(!1);async function S(l){try{a.value=!0;const s=`https://report.youbike.com.tw/mail/status?city=${l.city}&time=${l.time}&type=${l.type}`;await le.delete(s)}catch{throw new Error("刪除狀態失敗")}finally{a.value=!1}}const N=[{label:"低電量狀態",value:"低電量狀態"},{label:"斷線狀態",value:"斷線狀態"},{label:"未保養狀態",value:"未保養狀態"}],C=w("低電量狀態"),R=w([]),x=[{title:"系統",key:"type",align:"center"},{title:"分鐘 / 天",key:"min",align:"center"},{title:"操作",key:"edit",align:"center",render(l){return l.btn.map(b=>k(G,{style:{marginRight:"6px"},type:`${b.color}`,bordered:!1,onClick:()=>b.name==="編輯"?y(l):B(l)},{default:()=>b.name}))}}];async function B(l){console.log(l);const s={type:l.type,time:parseInt(l.min),city:v.city};await g(s)}function $(){const l=[];v.maildata.forEach((s,b)=>{let V=!1;b!==0&&l.forEach((E,Q)=>{E.type_name===s.type_name&&E.time===s.time&&(l[Q].mail.push(s.mail),V=!0)}),V||l.push({city_name:s.city_name,type_name:s.type_name,time:s.time,mail:[s.mail]})}),R.value=[],l.sort((s,b)=>s.time-b.time).forEach(s=>{s.type_name===C.value&&R.value.push({type:s.type_name,min:s.time.toString(),btn:[{name:"編輯",color:"info"},{name:"刪除",color:"error"}],mail:s.mail})})}const I=w(!1);function P(){I.value=!0}function M(){I.value=!1}const D=w({});function y(l){u(),D.value={mail:l.mail,type:l.type,min:l.min,city:v.city}}const d=w(!1);function u(){d.value=!0}function i(){d.value=!1}return te([()=>C.value,()=>v.maildata],()=>{$()},{deep:!0}),$(),(l,s)=>(Y(),J(ae,null,[o(r(ve),{active:a.value,"onUpdate:active":s[0]||(s[0]=b=>a.value=b),"can-cancel":!1,"is-full-page":!0},null,8,["active"]),f("div",la,[f("div",na,[o(r(pt),{value:C.value,"onUpdate:value":s[1]||(s[1]=b=>C.value=b),options:N,style:{"max-width":"200px"}},null,8,["value"])])]),f("div",ia,[f("div",oa,[o(r(xt),{class:"fw-bold",columns:x,data:R.value,pagination:{pageSize:100},"paginate-single-page":!1,size:"small"},null,8,["data"])])]),f("div",sa,[f("div",ra,[o(r(G),{type:"info",onClick:P},{default:p(()=>[U("+")]),_:1})])]),o(jt,{Modal:I.value,onCloseAddModal:M,title:C.value,city:e.city},null,8,["Modal","title","city"]),o(aa,{Modal:d.value,onCloseEditModal:i,editData:D.value},null,8,["Modal","editData"])],64))}},da={class:"contanier"},ca=f("div",{class:"row mx-0"},[f("h1",{class:"report-h1 fw-bold"},"異常通知")],-1),xa={__name:"SendmailView",setup(e){const v={"min-width":"80px","font-weight":"900"},h=ht().citys,g=w(null),a=w([]);let S=[];function N(){h.includes(2)&&a.value.push("台北市"),h.includes(3)&&a.value.push("新北市"),h.includes(4)&&a.value.push("桃園市"),h.includes(5)&&a.value.push("新竹市"),h.includes(6)&&a.value.push("新竹縣"),h.includes(20)&&a.value.push("竹科"),h.includes(7)&&a.value.push("苗栗縣"),h.includes(8)&&a.value.push("台中市"),h.includes(12)&&a.value.push("嘉義市"),h.includes(13)&&a.value.push("嘉義縣"),h.includes(14)&&a.value.push("台南市"),h.includes(15)&&a.value.push("高雄市"),h.includes(16)&&a.value.push("屏東縣")}gt("getData",C);async function C(){try{const B="https://report.youbike.com.tw/mail/mailcontent";S=(await le.get(B)).data.data,x()}catch(B){console.log(B)}}const R=w([]);function x(){R.value=S.filter(B=>B.city_name===g.value)}return te(g,()=>{x()}),(async()=>(N(),a.value.length!==0&&(g.value=a.value[0],await C())))(),(B,$)=>(Y(),J("div",da,[ca,o(r(_t),{value:g.value,"onUpdate:value":$[0]||($[0]=I=>g.value=I),type:"card","tab-style":v,size:"large"},{default:p(()=>[(Y(!0),J(ae,null,bt(a.value,I=>(Y(),yt(r(wt),{key:I,name:I},{default:p(()=>[o(ua,{maildata:R.value,city:g.value},null,8,["maildata","city"])]),_:2},1032,["name"]))),128))]),_:1},8,["value"])]))}};export{xa as default};
