import{u as Q,i as N,r as d,o as l,c as o,b,d as e,e as a,k as P,v as D,F as M,l as c,n as W,s as X,j as Z}from"./index-3459458a.js";import{L as ee}from"./index-fcaa1a70.js";import{_ as te}from"./OutputExcel-14eb8bfa.js";import{N as ie}from"./DatePicker-0f56cdd4.js";import{N as le}from"./DataTable-83b67cc2.js";import"./xlsx-bd534488.js";import"./Forward-c5c87e0a.js";import"./Input-c173e393.js";import"./get-slot-1efb97e5.js";const ae={class:"container-fluid px-0"},ne=a("div",{class:"row mx-0"},[a("h1",{class:"report-h1 fw-bold"},"每小時明細表")],-1),oe={class:"row mx-0 mx-md-2 align-items-center col-md-auto col-12"},se=a("label",{class:"col-md-auto col-form-label px-0 px-md-2 fw-bolder"},"系統別:",-1),ce={class:"col-md-auto px-0"},re=a("option",{selected:"",disabled:""},"請選擇",-1),ue=a("option",{value:"1.0"},"1.0",-1),me=a("option",{value:"2.0"},"2.0",-1),de=[re,ue,me],ge={class:"row mx-0 mx-md-2 align-items-center col-md-auto col-12"},ye=a("label",{class:"col-md-auto col-form-label px-0 px-md-2 fw-bolder"},"城市:",-1),ke={class:"col-md-auto px-0"},ve=a("option",{selected:"",disabled:""},"請選擇",-1),fe={key:0,value:"TP"},_e={key:1,value:"NTP2"},pe={key:2,value:"Taoyuan_two"},he={key:3,value:"Hsinchu2"},xe={key:4,value:"Hsinchu_Country"},we={key:5,value:"Taichung2"},Te={key:6,value:"Chiayi"},be={key:7,value:"Tainan"},Ce={key:8,value:"Kaohsiung"},Ne={key:9,value:"Pingtung"},Pe={key:0,value:"NTP"},De={key:1,value:"Taoyuan"},Me={key:2,value:"Miaoli"},He={key:3,value:"Taichung"},Ve={class:"row px-0 ps-md-4 mx-0 mx-md-2 align-items-center col-md-auto mt-3 mt-md-0"},Be={class:"row mx-0 mx-md-2 align-items-center col-md-auto col-12"},Re={__name:"CostumdayReporthour",setup(Ue){const u=Q().citys,C=N("ischange"),H=N("$swal");async function p(m){H({icon:"error",title:`${m}`,showConfirmButton:!1})}const h=d(null),t=d("請選擇"),g=d("請選擇"),k=d(!1),v=d([]),f=d(),V=m=>{const n=new Date(m),r=new Date,y=new Date(r.getFullYear(),r.getMonth(),r.getDate());return n<new Date(2023,7,8)||n>=y},s=d([]),B=[{key:"item1",align:"center",fixed:"left",title:"日期/時段"},{key:"item2",align:"center",title:"台北2.0進線數"},{key:"item3",align:"center",title:"台北2.0掛斷數"},{key:"item4",align:"center",title:"台北2.0接通數"},{key:"item5",align:"center",title:"1999進線數"},{key:"item6",align:"center",title:"1999掛斷數"},{key:"item7",align:"center",title:"1999接通數"},{key:"item8",align:"center",title:"5511進線數"},{key:"item9",align:"center",title:"5511掛斷數"},{key:"item10",align:"center",title:"5511接通數"}],U=[{key:"item1",align:"center",fixed:"left",title:"日期/時段"},{key:"item2",align:"center",title:"新北2.0進線數"},{key:"item3",align:"center",title:"新北2.0掛斷數"},{key:"item4",align:"center",title:"新北2.0接通數"}],$=[{key:"item1",align:"center",fixed:"left",title:"日期/時段"},{key:"item2",align:"center",title:"新北1.0進線數"},{key:"item3",align:"center",title:"新北1.0掛斷數"},{key:"item4",align:"center",title:"新北1.0接通數"}],E=[{key:"item1",align:"center",fixed:"left",title:"日期/時段"},{key:"item2",align:"center",title:"桃園1.0進線數"},{key:"item3",align:"center",title:"桃園1.0掛斷數"},{key:"item4",align:"center",title:"桃園1.0接通數"}],K=[{key:"item1",align:"center",fixed:"left",title:"日期/時段"},{key:"item2",align:"center",title:"桃園2.0進線數"},{key:"item3",align:"center",title:"桃園2.0掛斷數"},{key:"item4",align:"center",title:"桃園2.0接通數"}],S=[{key:"item1",align:"center",fixed:"left",title:"日期/時段"},{key:"item2",align:"center",title:"新竹2.0進線數"},{key:"item3",align:"center",title:"新竹2.0掛斷數"},{key:"item4",align:"center",title:"新竹2.0接通數"}],z=[{key:"item1",align:"center",fixed:"left",title:"日期/時段"},{key:"item2",align:"center",title:"竹縣2.0進線數"},{key:"item3",align:"center",title:"竹縣2.0掛斷數"},{key:"item4",align:"center",title:"竹縣2.0接通數"}],F=[{key:"item1",align:"center",fixed:"left",title:"日期/時段"},{key:"item2",align:"center",title:"苗栗1.0進線數"},{key:"item3",align:"center",title:"苗栗1.0掛斷數"},{key:"item4",align:"center",title:"苗栗1.0接通數"}],L=[{key:"item1",align:"center",fixed:"left",title:"日期/時段"},{key:"item2",align:"center",title:"嘉義進線數"},{key:"item3",align:"center",title:"嘉義掛斷數"},{key:"item4",align:"center",title:"嘉義接通數"}],j=[{key:"item1",align:"center",fixed:"left",title:"日期/時段"},{key:"item2",align:"center",title:"台中1.0進線數"},{key:"item3",align:"center",title:"台中1.0掛斷數"},{key:"item4",align:"center",title:"台中1.0接通數"}],A=[{key:"item1",align:"center",fixed:"left",title:"日期/時段"},{key:"item2",align:"center",title:"台中2.0進線數"},{key:"item3",align:"center",title:"台中2.0掛斷數"},{key:"item4",align:"center",title:"台中2.0接通數"}],I=[{key:"item1",align:"center",fixed:"left",title:"日期/時段"},{key:"item2",align:"center",title:"台南2.0進線數"},{key:"item3",align:"center",title:"台南2.0掛斷數"},{key:"item4",align:"center",title:"台南2.0接通數"}],R=[{key:"item1",align:"center",fixed:"left",title:"日期/時段"},{key:"item2",align:"center",title:"高雄2.0進線數"},{key:"item3",align:"center",title:"高雄2.0掛斷數"},{key:"item4",align:"center",title:"高雄2.0接通數"},{key:"item5",align:"center",title:"0800進線數"},{key:"item6",align:"center",title:"0800掛斷數"},{key:"item7",align:"center",title:"0800接通數"}],Y=[{key:"item1",align:"center",fixed:"left",title:"日期/時段"},{key:"item2",align:"center",title:"屏東2.0進線數"},{key:"item3",align:"center",title:"屏東2.0掛斷數"},{key:"item4",align:"center",title:"屏東2.0接通數"}];let x=[],w="",T=[];const q=(m,n,r)=>{x=[],w="",T=[],x=[...m],w=r,n.forEach(y=>{T.push(y.title)})},G=()=>{t.value==="TP"?s.value=[...B]:t.value==="NTP2"?s.value=[...$]:t.value==="NTP"?s.value=[...U]:t.value==="Taoyuan"?s.value=[...E]:t.value==="Taoyuan_two"?s.value=[...K]:t.value==="Hsinchu2"?s.value=[...S]:t.value==="Hsinchu_Country"?s.value=[...z]:t.value==="Miaoli"?s.value=[...F]:t.value==="Chiayi"?s.value=[...L]:t.value==="Taichung2"?s.value=[...A]:t.value==="Taichung"?s.value=[...j]:t.value==="Kaohsiung"?s.value=[...R]:t.value==="Tainan"?s.value=[...I]:t.value==="Pingtung"&&(s.value=[...Y])},J=async()=>{try{const m="https://report.youbike.com.tw/isauth/gcpfun";let n={dataset_id:"report",table_id:"CTI_inline_detail",date:f.value,city:t.value,sys:g.value};k.value=!0;const y=(await Z.get(m,{params:n})).data.data,_=[];y.forEach(i=>{t.value==="TP"?_.push({item1:i.time_range,item2:i.total_two,item3:i.hangup_two,item4:i.answer_two,item5:i.total_1999,item6:i.hangup_1999,item7:i.answer_1999,item8:i.total_5511,item9:i.hangup_5511,item10:i.answer_5511}):t.value==="Kaohsiung"?_.push({item1:i.time_range,item2:i.total_two,item3:i.hangup_two,item4:i.answer_two,item5:i.total_0800,item6:i.hangup_0800,item7:i.answer_0800}):_.push({item1:i.time_range,item2:i.total,item3:i.hangup,item4:i.answer})}),v.value=[..._],q(v.value,s.value,"每小時明細表"),h.value&&h.value.page(1),k.value=!1}catch(m){console.log(m)}},O=async()=>{if(g.value==="請選擇")return p("請選擇系統別");if(t.value==="請選擇")return p("請選擇城市");if(!f.value)return p("請選擇日期");G(),await J()};return(m,n)=>(l(),o("div",ae,[b(e(ee),{active:k.value,"onUpdate:active":n[0]||(n[0]=r=>k.value=r),"can-cancel":!1,"is-full-page":!0},null,8,["active"]),ne,a("form",{class:W(["row mx-0",{"report-header":!e(C),"report-header-dark":e(C)}])},[a("div",oe,[se,a("div",ce,[P(a("select",{class:"form-select form-select-sm","aria-label":"car","onUpdate:modelValue":n[1]||(n[1]=r=>g.value=r),onChange:n[2]||(n[2]=r=>t.value="請選擇")},de,544),[[D,g.value]])])]),a("div",ge,[ye,a("div",ke,[P(a("select",{class:"form-select form-select-sm","aria-label":"car","onUpdate:modelValue":n[3]||(n[3]=r=>t.value=r)},[ve,g.value==2?(l(),o(M,{key:0},[e(u).includes(2)?(l(),o("option",fe,"台北市")):c("",!0),e(u).includes(3)?(l(),o("option",_e," 新北市 ")):c("",!0),e(u).includes(4)?(l(),o("option",pe," 桃園市 ")):c("",!0),e(u).includes(5)?(l(),o("option",he," 新竹市 ")):c("",!0),e(u).includes(6)?(l(),o("option",xe," 新竹縣 ")):c("",!0),e(u).includes(8)?(l(),o("option",we," 台中市 ")):c("",!0),e(u).includes(12)?(l(),o("option",Te," 嘉義市 ")):c("",!0),e(u).includes(14)?(l(),o("option",be," 台南市 ")):c("",!0),e(u).includes(15)?(l(),o("option",Ce," 高雄市 ")):c("",!0),e(u).includes(16)?(l(),o("option",Ne," 屏東縣 ")):c("",!0)],64)):g.value==1?(l(),o(M,{key:1},[e(u).includes(3)?(l(),o("option",Pe,"新北市")):c("",!0),e(u).includes(4)?(l(),o("option",De," 桃園縣 ")):c("",!0),e(u).includes(7)?(l(),o("option",Me," 苗栗縣 ")):c("",!0),e(u).includes(8)?(l(),o("option",He," 台中市 ")):c("",!0)],64)):c("",!0)],512),[[D,t.value]])]),a("div",Ve,[b(e(ie),{class:"px-0","formatted-value":f.value,"onUpdate:formattedValue":n[4]||(n[4]=r=>f.value=r),type:"date",actions:null,"input-readonly":!0,"update-value-on-close":!0,placeholder:"請選擇日期","value-format":"yyyy-MM-dd","is-date-disabled":V},null,8,["formatted-value"])])]),a("div",Be,[a("button",{type:"button",class:"btn btn-success text-light mt-3 mt-md-0 col-md-auto mx-md-2",onClick:O}," 搜尋 "),b(te,{class:"btn btn-primary text-light mt-3 mt-md-0 col-md-auto mx-md-2",data:e(x),name:e(w),header:e(T)},null,8,["data","name","header"])])],2),v.value.length>1?(l(),X(e(le),{key:0,ref_key:"dataTable",ref:h,size:"small",pagination:{pageSize:17},columns:s.value,data:v.value,"max-height":600,"scroll-x":700,bordered:!1,"single-line":!1,striped:""},null,8,["columns","data"])):c("",!0)]))}};export{Re as default};
