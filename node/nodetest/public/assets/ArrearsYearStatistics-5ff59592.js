import{i as E,u as D,r as _,o as t,c as a,b as C,d as e,e as n,l as N,v as z,F as B,m as l,n as L,x as S,L as A,k as F}from"./index-1f4bc719.js";import{_ as K}from"./OutputExcel-4803ad31.js";import{N as V}from"./DataTable-f85d01cc.js";import"./xlsx-bd534488.js";import"./get-slot-1efb97e5.js";const Y={class:"container-fluid px-0"},j=n("div",{class:"row mx-0"},[n("h1",{class:"report-h1 fw-bold"},"欠費統計(年度區分)")],-1),q={class:"row mx-0 mx-md-2 align-items-center col-md-auto col-12"},G=n("label",{class:"col-md-auto col-form-label px-0 px-md-2 fw-bolder"},"系統別:",-1),I={class:"col-md-auto px-0"},J=n("option",{selected:"",disabled:""},"請選擇",-1),O=n("option",{value:"1"},"1.0",-1),P=n("option",{value:"2.0+2.0e"},"2.0+2.0E",-1),Q=[J,O,P],R={class:"row mx-0 mx-md-2 align-items-center col-md-auto col-12"},W=n("label",{class:"col-md-auto col-form-label px-0 px-md-2 fw-bolder"},"城市:",-1),X={class:"col-md-auto px-0"},Z=n("option",{selected:"",disabled:""},"請選擇",-1),ee={key:0,value:"Taipei"},te={key:1,value:"Newtaipei"},ae={key:2,value:"Taoyuan"},le={key:3,value:"Hsinchu"},oe={key:4,value:"Miaoli"},ne={key:5,value:"Taichung"},se={key:0,value:"Taipei2"},ie={key:1,value:"Newtaipei2"},ue={key:2,value:"Taoyuan2"},ce={key:3,value:"Taoyuan2E"},re={key:4,value:"Hsinchu2"},de={key:5,value:"Hsinchu_Country2"},me={key:6,value:"Hsinchu_Country2E"},_e={key:7,value:"Miaoli2"},ve={key:8,value:"Miaoli2E"},pe={key:9,value:"Taichung2"},he={key:10,value:"Taichung2E"},ye={key:11,value:"Chiayi2"},ge={key:12,value:"Chiayi2E"},ke={key:13,value:"Kaohsiung2"},fe={key:14,value:"Kaohsiung2E"},xe={class:"row mx-0 mx-md-2 align-items-center col-md-auto col-12"},Be={__name:"ArrearsYearStatistics",setup(be){const f=E("ischange"),o=D().citys,$=E("$swal");async function x(d){$({icon:"error",title:`${d}`,showConfirmButton:!1})}const p=_(!1),b=_(),c=_("請選擇"),h=_(null),m=_([]),v=_("請選擇"),w=[{key:"num1",align:"center",fixed:"left",title:"欠費年度",width:80},{key:"num2",align:"center",title:"全部筆數"},{key:"num3",align:"center",title:"全部欠款"},{key:"num4",align:"center",title:"特殊狀況筆數"},{key:"num5",align:"center",title:"特殊狀況欠款"},{key:"num6",align:"center",title:"真實筆數"},{key:"num7",align:"center",title:"真實欠款"},{key:"num8",align:"center",title:"市府應收款(10元)"},{key:"num9",align:"center",title:"市府應收款(5元)"},{key:"num10",align:"center",title:"合計市府應收款"},{key:"num11",align:"center",title:"合計欠費"}],T=[{key:"num1",align:"center",fixed:"left",title:"欠費年度",width:80},{key:"num2",align:"center",title:"全部筆數"},{key:"num3",align:"center",title:"全部欠款"},{key:"num4",align:"center",title:"特殊狀況筆數"},{key:"num5",align:"center",title:"特殊狀況欠款"},{key:"num6",align:"center",title:"真實筆數"},{key:"num7",align:"center",title:"真實欠款"},{key:"num8",align:"center",title:"市府應收款(10元)"},{key:"num9",align:"center",title:"市府應收款(5元)"},{key:"num10",align:"center",title:"市府應收款(2元)"},{key:"num11",align:"center",title:"合計市府應收款"},{key:"num12",align:"center",title:"合計欠費"}];let y=[],g="",k=[];const H=(d,u)=>{y=[],g="",k=[];let r=[];y=[...d],g=u,c.value=="1"?r=[...w]:c.value=="2.0+2.0e"&&(r=[...T]),r.forEach(s=>{k.push(s.title)})},M=async()=>{try{p.value=!0,m.value=[];const d="https://report.youbike.com.tw/isauth/gcpfun",u={dataset_id:"data_analysis",city:v.value};c.value==1?u.table_id="arrearsall_report1":c.value=="2.0+2.0e"&&(u.table_id="arrearsall_report2");const r=await F.get(d,{params:u});if(p.value=!1,!r.data.data)return;r.data.data.forEach(s=>{const i={};i.num1=s.NYear,i.num2=s.CNT_all,i.num3=s.Total_all,i.num4=s.CNT_special,i.num5=s.Total_special,i.num6=s.CNT_real,i.num7=s.Total_real,i.num8=s.gov10,i.num9=s.gov5,c.value=="1"?(i.num10=s.gov,i.num11=s.total_arrearsall):c.value=="2.0+2.0e"&&(i.num10=s.gov2,i.num11=s.gov,i.num12=s.total_arrearsall),m.value.push(i),H(m.value,"欠費統計(年度區分)")})}catch(d){console.log(d)}},U=()=>{if(c.value=="請選擇"){x("系統不能為空");return}else if(v.value=="請選擇"){x("城市不能為空");return}c.value=="1"?h.value=1:c.value=="2.0+2.0e"&&(h.value=2),M()};return(d,u)=>(t(),a("div",Y,[C(e(A),{active:p.value,"onUpdate:active":u[0]||(u[0]=r=>p.value=r),"can-cancel":!1,"is-full-page":!0},null,8,["active"]),j,n("form",{class:L(["row mx-0",{"report-header":!e(f),"report-header-dark":e(f)}])},[n("div",q,[G,n("div",I,[N(n("select",{class:"form-select form-select-sm","aria-label":"car","onUpdate:modelValue":u[1]||(u[1]=r=>c.value=r),onChange:u[2]||(u[2]=r=>v.value="請選擇")},Q,544),[[z,c.value]])])]),n("div",R,[W,n("div",X,[N(n("select",{class:"form-select form-select-sm","aria-label":"car","onUpdate:modelValue":u[3]||(u[3]=r=>v.value=r)},[Z,c.value==1?(t(),a(B,{key:0},[e(o).includes(2)?(t(),a("option",ee," 台北市 ")):l("",!0),e(o).includes(3)?(t(),a("option",te," 新北市 ")):l("",!0),e(o).includes(4)?(t(),a("option",ae," 桃園市 ")):l("",!0),e(o).includes(5)?(t(),a("option",le," 新竹市 ")):l("",!0),e(o).includes(7)?(t(),a("option",oe," 苗栗縣 ")):l("",!0),e(o).includes(8)?(t(),a("option",ne," 台中市 ")):l("",!0)],64)):c.value=="2.0+2.0e"?(t(),a(B,{key:1},[e(o).includes(2)?(t(),a("option",se," 台北市2.0 ")):l("",!0),e(o).includes(3)?(t(),a("option",ie," 新北市2.0 ")):l("",!0),e(o).includes(4)?(t(),a("option",ue," 桃園市2.0 ")):l("",!0),e(o).includes(4)?(t(),a("option",ce," 桃園市2.0E ")):l("",!0),e(o).includes(5)?(t(),a("option",re," 新竹市2.0 ")):l("",!0),e(o).includes(6)?(t(),a("option",de," 新竹縣2.0 ")):l("",!0),e(o).includes(6)?(t(),a("option",me," 新竹縣2.0E ")):l("",!0),e(o).includes(7)?(t(),a("option",_e," 苗栗縣2.0 ")):l("",!0),e(o).includes(7)?(t(),a("option",ve," 苗栗縣2.0E ")):l("",!0),e(o).includes(8)?(t(),a("option",pe," 台中市2.0 ")):l("",!0),e(o).includes(8)?(t(),a("option",he," 台中市2.0E ")):l("",!0),e(o).includes(12)?(t(),a("option",ye," 嘉義市2.0 ")):l("",!0),e(o).includes(12)?(t(),a("option",ge," 嘉義市2.0E ")):l("",!0),e(o).includes(15)?(t(),a("option",ke," 高雄市2.0 ")):l("",!0),e(o).includes(15)?(t(),a("option",fe," 高雄市2.0E ")):l("",!0)],64)):l("",!0)],512),[[z,v.value]])])]),n("div",xe,[n("button",{type:"button",class:"btn btn-success text-light mt-3 mt-md-0 col-md-auto mx-md-2",onClick:U}," 搜尋 "),C(K,{class:"btn btn-primary text-light mt-3 mt-md-0 col-md-auto mx-md-2",data:e(y),name:e(g),header:e(k)},null,8,["data","name","header"])])],2),m.value.length>0&&h.value==1?(t(),S(e(V),{key:0,ref_key:"dataTable",ref:b,data:m.value,columns:w,pagination:{pageSize:15},"max-height":600,"scroll-x":1e3,size:"small",bordered:!1,"single-line":!1,striped:""},null,8,["data"])):l("",!0),m.value.length>0&&h.value==2?(t(),S(e(V),{key:1,ref_key:"dataTable",ref:b,data:m.value,columns:T,size:"small",pagination:{pageSize:15},"max-height":600,"scroll-x":1e3,bordered:!1,"single-line":!1,striped:""},null,8,["data"])):l("",!0)]))}};export{Be as default};
