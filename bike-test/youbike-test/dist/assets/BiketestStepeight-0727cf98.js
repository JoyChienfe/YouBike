/* empty css             *//* empty css                     *//* empty css                  *//* empty css                *//* empty css                  *//* empty css                 */import{_ as G}from"./_plugin-vue_export-helper-30db3103.js";/* empty css                    */import{d as H,u as O,af as Y,r as h,a3 as J,ag as K,c as p,e as c,a as l,w as s,a4 as f,E as W,o as i,ac as y,ah as V,h as _,g as X,ai as Z,aj as ee,i as te,an as ae,k as le,j as oe,m as se,ak as ne,al as ce,ao as re}from"./index-c76dfb5f.js";import{_ as ue}from"./PhotoComponent.vue_vue_type_script_setup_true_lang-cd699251.js";import{u as ie}from"./bikestest-a97b2d4a.js";import{u as de}from"./auth-f96cf751.js";const C=b=>(Z("data-v-28062aff"),b=b(),ee(),b),me={class:"container-fluid"},pe=C(()=>c("p",{class:"fs-1 mb-2 text-center"},"模擬體驗",-1)),fe={class:"row"},_e={class:"col-12 mb-1"},ve={class:"col-12 mb-1"},ke={class:"col-12 mb-1"},he={class:"col-12 mb-1"},be={class:"row mx-auto"},ge={class:"col-6"},we={class:"col-6"},ye={class:"col-12 mb-1"},Ve={class:"col-12 mb-1"},xe={class:"col-12 mb-1"},Se=C(()=>c("br",null,null,-1)),Be=C(()=>c("br",null,null,-1)),Ce={class:"row mx-auto"},De={class:"col-6"},Ee={class:"col-6"},$e=H({__name:"BiketestStepeight",setup(b){const g=O(),k=Y("$swal");async function T(){return!!(await k({icon:"warning",title:"是否提交表單",showCancelButton:!0,confirmButtonText:"是",cancelButtonText:"否"})).isConfirmed}async function A(){let n;await k({icon:"success",title:"表單送出成功",html:"將導到拍照頁面...",timer:2500,timerProgressBar:!0,didOpen:()=>{k.showLoading(),k.getPopup().querySelector("b")},willClose:()=>{clearInterval(n)}})}async function F(){return!!(await k({icon:"warning",title:"是否需要拍照",showCancelButton:!0,cancelButtonText:"否",confirmButtonText:"是"})).isConfirmed}const x=h(),e=h({catequery:"1.0",startrow:null,endrow:null,text:"",iscodepass:null,checkdata:[{title:"騎乘行進",ischeck:[],value:["行進不順暢","異音"]},{title:"煞車功能",ischeck:[],value:["無法煞車","煞車過鬆 ( 2/3仍無法煞停 )","煞車過緊 ( 未滿1/3已經煞停 )","異音"]},{title:"變速功能",ischeck:[],value:["指示蓋 (銀) 脫落","上蓋 (黑) 脫落／檔位標示無法辨識","換檔轉動不順 ( 2轉3過緊 )","檔位無法定位","實際騎乘無法變速"]},{title:"隨車鎖",ischeck:[],value:["貼紙文字無法傳達完整訊息","鎖孔  生鏽／脫漆","上鎖／解鎖 失敗、異常","鎖體  面積10%生鏽"]}]}),I=h({iscodepass:[{required:!0,message:"掃瑪借車不能為空",trigger:"blur"}],startrow:[{required:!0,message:"前胎壓不能為空",trigger:"blur"}],endrow:[{required:!0,message:"後胎壓不能為空",trigger:"blur"}]}),M=()=>{window.scrollTo({top:0,behavior:"smooth"})},o=ie();J(()=>{M(),o.step.step8||g.push("/server/biketest/BiketestStepseven"),o.systum==="1.0"?e.value.catequery="1.0":o.systum==="2.0"?e.value.catequery="2.0":e.value.catequery="2.0E",U()});const U=()=>{var a,d,u;const n=o.systum;n==="1.0"?(console.log("現在系統是1.0,賦予資料中..."),console.log("不需要保存資料,因為1.0這是最後一頁")):n==="2.0"?(console.log("現在系統是2.0,賦予資料中..."),console.log("不需要保存資料,因為2.0這是最後一頁")):n==="2.0E"?(console.log("現在系統是2.0E,賦予資料中..."),e.value.checkdata[1].ischeck=(a=o.testfrom3.煞車功能)==null?void 0:a.ischeck,e.value.checkdata[2].ischeck=(d=o.testfrom3.變速功能)==null?void 0:d.ischeck,e.value.checkdata[3].ischeck=(u=o.testfrom3.隨車鎖)==null?void 0:u.ischeck):console.log("現在沒有系統")};function N(){const n=new Date,a=n.getFullYear(),d=String(n.getMonth()+1).padStart(2,"0"),u=String(n.getDate()).padStart(2,"0"),r=String(n.getHours()).padStart(2,"0"),v=String(n.getMinutes()).padStart(2,"0"),m=String(n.getSeconds()).padStart(2,"0");return`${a}-${d}-${u} ${r}:${v}:${m}`}const S=h(!1),D=h({});function j(){S.value=!0}function P(){S.value=!1}function E(){o.clearfrom(),o.clearstep(),g.push("/server/bikesubmit")}const L=de(),{account:R}=L.getUserid(),$=async n=>{if(n)try{if(await n.validate(),e.value.catequery==="1.0")return;if(e.value.catequery==="2.0"){if(!await T())return;o.testfrom2.騎乘行進=e.value.checkdata[0],o.testfrom2.iscodepass=e.value.iscodepass,o.testfrom2.startrow=e.value.startrow,o.testfrom2.endrow=e.value.endrow,o.testfrom2.text=e.value.text;const d="https://simulation.youbike.com.tw/biketest/biketest",u=o.testfrom2.station_name.split("-"),r={sys:o.systum,user_id:R,edit_id:"",test_date:N(),station_name:`${u[0]}-${u[1]}`,carnum:o.testfrom2.carnum,carnum2:o.testfrom2.carnum2,tablejson:o.testfrom2};if(await te.post(d,r),await A(),!await F())E();else{const m=new Date,w=m.getMonth()+1,B=m.getDate();D.value={payload:`(${w}-${B})-${o.testfrom2.carnum}`},j();return}}else e.value.catequery==="2.0E"&&(o.testfrom3.煞車功能=e.value.checkdata[1],o.testfrom3.變速功能=e.value.checkdata[2],o.testfrom3.隨車鎖=e.value.checkdata[3],console.log("送出2.0E"),o.step.step9=!0,g.push("/server/biketest/BiketestStepnine"))}catch{console.log("驗證失敗")}};window.addEventListener("beforeunload",function(n){const a="您確定要離開此頁面嗎？您的未保存更改將丟失。";n.returnValue=a,confirm(a)||n.preventDefault()});const q=()=>{o.step.step8=!1,g.push("/server/biketest/BiketestStepseven")};return(n,a)=>{const d=re,u=ae,r=le,v=oe,m=se,w=K("QuestionFilled"),B=ne,z=ce,Q=W;return i(),p(f,null,[c("div",me,[pe,l(Q,{"label-width":"120px",size:"large","label-position":"top",model:e.value,ref_key:"formRefAll",ref:x,rules:I.value},{default:s(()=>[c("div",fe,[e.value.catequery==="1.0"?(i(),p(f,{key:0},[],64)):e.value.catequery==="2.0"?(i(),p(f,{key:1},[c("div",_e,[l(r,{label:e.value.checkdata[0].title},{default:s(()=>[l(u,{modelValue:e.value.checkdata[0].ischeck,"onUpdate:modelValue":a[0]||(a[0]=t=>e.value.checkdata[0].ischeck=t)},{default:s(()=>[(i(!0),p(f,null,y(e.value.checkdata[0].value,t=>(i(),V(d,{key:t,label:t,name:t},null,8,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),c("div",ve,[l(r,{label:"前胎壓",prop:"startrow"},{default:s(()=>[l(v,{placeholder:"請輸入前胎壓",modelValue:e.value.startrow,"onUpdate:modelValue":a[1]||(a[1]=t=>e.value.startrow=t),type:"number",inputmode:"numeric"},null,8,["modelValue"])]),_:1})]),c("div",ke,[l(r,{label:"後胎壓",prop:"endrow"},{default:s(()=>[l(v,{placeholder:"請輸入後胎壓",modelValue:e.value.endrow,"onUpdate:modelValue":a[2]||(a[2]=t=>e.value.endrow=t),type:"number",inputmode:"numeric"},null,8,["modelValue"])]),_:1})]),c("div",he,[l(r,{label:"備註"},{default:s(()=>[l(v,{type:"textarea",modelValue:e.value.text,"onUpdate:modelValue":a[3]||(a[3]=t=>e.value.text=t)},null,8,["modelValue"])]),_:1})]),c("div",be,[c("div",ge,[l(r,null,{default:s(()=>[l(m,{type:"primary",plain:"",class:"col-12",onClick:q},{default:s(()=>[_("上一步")]),_:1})]),_:1})]),c("div",we,[l(r,null,{default:s(()=>[l(m,{type:"primary",plain:"",class:"col-12",onClick:a[4]||(a[4]=t=>$(x.value))},{default:s(()=>[_("完成")]),_:1})]),_:1})])])],64)):e.value.catequery==="2.0E"?(i(),p(f,{key:2},[c("div",ye,[l(r,{label:e.value.checkdata[1].title},{default:s(()=>[l(u,{modelValue:e.value.checkdata[1].ischeck,"onUpdate:modelValue":a[5]||(a[5]=t=>e.value.checkdata[1].ischeck=t)},{default:s(()=>[(i(!0),p(f,null,y(e.value.checkdata[1].value,t=>(i(),V(d,{key:t,label:t,name:t},null,8,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),c("div",Ve,[l(r,{label:e.value.checkdata[2].title},{default:s(()=>[l(u,{modelValue:e.value.checkdata[2].ischeck,"onUpdate:modelValue":a[6]||(a[6]=t=>e.value.checkdata[2].ischeck=t)},{default:s(()=>[(i(!0),p(f,null,y(e.value.checkdata[2].value,t=>(i(),V(d,{key:t,label:t,name:t},null,8,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),c("div",xe,[l(z,{class:"box-item",effect:"dark",placement:"top-start"},{content:s(()=>[_(" 隨車鎖異常 : 車機文字顯示"),Se,_(" 上鎖成功 → 插銷可抽出"),Be,_(" 解鎖成功 → 插銷抽不出 ")]),default:s(()=>[l(B,{size:"20",color:"#ADADAD"},{default:s(()=>[l(w)]),_:1})]),_:1}),l(r,{label:e.value.checkdata[3].title},{default:s(()=>[l(u,{modelValue:e.value.checkdata[3].ischeck,"onUpdate:modelValue":a[7]||(a[7]=t=>e.value.checkdata[3].ischeck=t)},{default:s(()=>[(i(!0),p(f,null,y(e.value.checkdata[3].value,t=>(i(),V(d,{key:t,label:t,name:t},null,8,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),c("div",Ce,[c("div",De,[l(r,null,{default:s(()=>[l(m,{type:"primary",plain:"",class:"col-12",onClick:q},{default:s(()=>[_("上一步")]),_:1})]),_:1})]),c("div",Ee,[l(r,null,{default:s(()=>[l(m,{type:"primary",plain:"",class:"col-12",onClick:a[8]||(a[8]=t=>$(x.value))},{default:s(()=>[_("下一步")]),_:1})]),_:1})])])],64)):X("",!0)])]),_:1},8,["model","rules"])]),l(ue,{centerDialogVisible:S.value,onCloseModal:P,"upload-data":D.value,onSubmitFrom:E},null,8,["centerDialogVisible","upload-data"])],64)}}});const ze=G($e,[["__scopeId","data-v-28062aff"]]);export{ze as default};
