/* empty css             *//* empty css                     *//* empty css                  */import{_ as Q}from"./_plugin-vue_export-helper-30db3103.js";/* empty css                    *//* empty css                 *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                *//* empty css                  */import{L as G}from"./index-1feeb734.js";import{d as H,u as Y,ab as J,r as v,ac as P,c as p,a as e,b as W,w as o,i as U,E as X,o as r,e as c,h as x,a4 as g,ad as y,ae as V,g as Z,af as ee,ag as te,ah as ae,ai as le,k as oe,aj as ne,ak as se,al as ue,j as ce,l as re,am as de,m as ie,an as me}from"./index-62a9fa75.js";import{u as pe}from"./auth-c9b42ca7.js";const F=w=>(ee("data-v-ba724e53"),w=w(),te(),w),_e={class:"container-fluid"},ve=F(()=>c("p",{class:"fs-1 text-center"},"場站檢驗",-1)),fe={class:"row"},be={class:"col-12 mb-3"},ke={key:0,class:"row"},he={class:"col-12 mb-3"},ge=F(()=>c("br",null,null,-1)),ye={class:"col-12 mb-1"},Ve={class:"col-12 mb-1"},Se={class:"col-12 mb-3"},we={class:"col-12 mb-3"},Ae={class:"col-12 mb-3"},De={class:"col-12 mb-3"},xe={class:"col-12 mb-3"},Ee={key:1,class:"row"},Ue={class:"col-12 mb-3"},qe={class:"col-12 mb-1"},Ce={class:"col-12 mb-1"},Ie={class:"col-12 mb-3"},Ke=H({__name:"StationtestView",setup(w){const L=Y(),N=J("$swal");async function O(){return!!(await N({icon:"warning",title:"是否提交表單",showCancelButton:!0,confirmButtonText:"是",cancelButtonText:"否"})).isConfirmed}const E=v(),l=v({name:"",catequery:"",carnum:null,nosencarnum:null,checkdata:[{title:"場站周遭環境",ischeck:[],value:["停車柱","基板","垃圾多"]},{title:"KIOSK功能",ischeck:[],value:["黑屏、畫面無反應","內容站點資訊不清楚"]},{title:"KIOSK外觀",ischeck:[],value:["嚴重髒汙","廣告貼紙","塗鴉","正面Logo貼紙褪色"]},{title:"KIOSK燈片",ischeck:[],value:["站名牌","後燈片使用說明"]},{title:"場站導標桿",ischeck:[],value:["歪斜、損毀","漏缺"]}]}),T=v({name:[{required:!0,message:"場站名稱不能為空",trigger:"blur"}],catequery:[{required:!0,message:"系統別不能為空",trigger:"blur"}],carnum:[{required:!0,message:"場站車輛數不能為空",trigger:"blur"}],nosencarnum:[{required:!0,message:"無法租借車輛數不能為空",trigger:"blur"}]}),q=()=>{const n=new Date,a=n.getFullYear(),f=String(n.getMonth()+1).padStart(2,"0"),b=String(n.getDate()).padStart(2,"0"),s=String(n.getHours()).padStart(2,"0"),d=String(n.getMinutes()).padStart(2,"0"),u=String(n.getSeconds()).padStart(2,"0");return`${a}-${f}-${b} ${s}:${d}:${u}`},j=pe(),A=v(!1),C=async n=>{if(n)try{if(await n.validate(),!await O())return;const{catequery:f,name:b,carnum:s,nosencarnum:d,checkdata:u}=l.value;A.value=!0;const{account:i}=j.getUserid();if(l.value.catequery==="1.0"){const _="https://simulation.youbike.com.tw/station/station_1";try{const m={date:q(),user_id:i,edit_id:"",station_name:b,sys:f,carnum:s,no_carnum:d,場站周遭環境:u[0].ischeck,KIOSK功能:u[1].ischeck,KIOSK外觀:u[2].ischeck,KIOSK燈片:u[3].ischeck,場站導標桿:u[4].ischeck};await U.post(_,m)}catch(m){console.log(m)}}else try{const _="https://simulation.youbike.com.tw/station/station_2",m={date:q(),user_id:i,edit_id:"",station_name:b,sys:f,carnum:s,no_carnum:d,場站導標桿:u[4].ischeck};await U.post(_,m)}catch(_){console.log(_)}A.value=!1,L.push("/server/stationsubmit")}catch{console.log("驗證失敗")}},I=v([]);(async()=>{try{const n="https://simulation.youbike.com.tw/station/stations",a=await U.get(n);I.value=a.data.data}catch(n){console.log(n)}})();const K=v([]),D=v(!1),S=v([]),M=async()=>{l.value.name=null,S.value=[];const n=[];I.value.forEach(a=>{l.value.catequery==="1.0"?a.Sys==="1.0"&&n.push({value:a.Station_Name,label:a.Station_Name}):a.Sys!=="1.0"&&n.push({value:a.Station_Name,label:a.Station_Name})}),K.value=[...n]},$=n=>{n?(D.value=!0,setTimeout(()=>{D.value=!1,S.value=K.value.filter(a=>a.label.toLowerCase().includes(n.toLowerCase()))},200)):S.value=[]};return(n,a)=>{const f=ae,b=le,s=oe,d=P("QuestionFilled"),u=ne,i=se,_=ue,m=ce,z=re,k=me,h=de,B=ie,R=X;return r(),p("div",_e,[e(W(G),{active:A.value,"onUpdate:active":a[0]||(a[0]=t=>A.value=t),"can-cancel":!1,"is-full-page":!0},null,8,["active"]),ve,e(R,{"label-width":"120px",size:"large","label-position":"top",model:l.value,ref_key:"formRefAll",ref:E,rules:T.value},{default:o(()=>[c("div",fe,[c("div",be,[e(s,{label:"系統別",prop:"catequery"},{default:o(()=>[e(b,{placeholder:"請選擇系統別",class:"col-12",onChange:M,modelValue:l.value.catequery,"onUpdate:modelValue":a[1]||(a[1]=t=>l.value.catequery=t)},{default:o(()=>[e(f,{label:"1.0",value:"1.0"}),e(f,{label:"2.0+2.0E",value:"2.0+2.0E"})]),_:1},8,["modelValue"])]),_:1})])]),l.value.catequery==="1.0"?(r(),p("div",ke,[c("div",he,[e(i,{class:"box-item",effect:"dark",placement:"top-start"},{content:o(()=>[x(" 若搜尋不到場站，請先重新整理頁面。"),ge,x("如仍無出現場站，請選擇同一城市任一場站，並於第一輛車中備註實際檢驗場站名稱。 ")]),default:o(()=>[e(u,{size:"20",color:"#ADADAD"},{default:o(()=>[e(d)]),_:1})]),_:1}),e(s,{label:"場站名稱",prop:"name"},{default:o(()=>[e(_,{modelValue:l.value.name,"onUpdate:modelValue":a[2]||(a[2]=t=>l.value.name=t),style:{width:"100%"},filterable:"",remote:"","remote-method":$,clearable:"",options:S.value,loading:D.value,placeholder:"請輸入場站名稱"},null,8,["modelValue","options","loading"])]),_:1})]),c("div",ye,[e(s,{label:"場站車輛數",prop:"carnum"},{default:o(()=>[e(m,{placeholder:"請輸入場站車輛數",modelValue:l.value.carnum,"onUpdate:modelValue":a[3]||(a[3]=t=>l.value.carnum=t),type:"number",inputmode:"numeric"},null,8,["modelValue"])]),_:1})]),c("div",Ve,[e(i,{class:"box-item",effect:"dark",content:"坐墊反轉／亮紅燈",placement:"top-start"},{default:o(()=>[e(u,{size:"20",color:"#ADADAD"},{default:o(()=>[e(d)]),_:1})]),_:1}),e(s,{label:"無法租借車輛數",prop:"nosencarnum"},{default:o(()=>[e(z,{title:"坐墊反轉、無法喚醒車機、車機顯示電量過低或暫停服務",type:"warning ",closable:!1,class:"my-1"}),e(m,{placeholder:"請輸入無法租借車輛數",modelValue:l.value.nosencarnum,"onUpdate:modelValue":a[4]||(a[4]=t=>l.value.nosencarnum=t),type:"number",inputmode:"numeric"},null,8,["modelValue"])]),_:1})]),c("div",Se,[e(i,{class:"box-item",effect:"dark",content:"髒汙、脫漆 、鏽蝕",placement:"top-start"},{default:o(()=>[e(u,{size:"20",color:"#ADADAD"},{default:o(()=>[e(d)]),_:1})]),_:1}),e(s,{label:l.value.checkdata[0].title},{default:o(()=>[e(h,{modelValue:l.value.checkdata[0].ischeck,"onUpdate:modelValue":a[5]||(a[5]=t=>l.value.checkdata[0].ischeck=t)},{default:o(()=>[(r(!0),p(g,null,y(l.value.checkdata[0].value,t=>(r(),V(k,{key:t,label:t,name:t},null,8,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),c("div",we,[e(s,{label:l.value.checkdata[1].title},{default:o(()=>[e(h,{modelValue:l.value.checkdata[1].ischeck,"onUpdate:modelValue":a[6]||(a[6]=t=>l.value.checkdata[1].ischeck=t)},{default:o(()=>[(r(!0),p(g,null,y(l.value.checkdata[1].value,t=>(r(),V(k,{key:t,label:t,name:t},null,8,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),c("div",Ae,[e(s,{label:l.value.checkdata[2].title},{default:o(()=>[e(h,{modelValue:l.value.checkdata[2].ischeck,"onUpdate:modelValue":a[7]||(a[7]=t=>l.value.checkdata[2].ischeck=t)},{default:o(()=>[(r(!0),p(g,null,y(l.value.checkdata[2].value,t=>(r(),V(k,{key:t,label:t,name:t},null,8,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),c("div",De,[e(i,{class:"box-item",effect:"dark",content:"褪色、變色、髒汙",placement:"top-start"},{default:o(()=>[e(u,{size:"20",color:"#ADADAD"},{default:o(()=>[e(d)]),_:1})]),_:1}),e(s,{label:l.value.checkdata[3].title},{default:o(()=>[e(h,{modelValue:l.value.checkdata[3].ischeck,"onUpdate:modelValue":a[8]||(a[8]=t=>l.value.checkdata[3].ischeck=t)},{default:o(()=>[(r(!0),p(g,null,y(l.value.checkdata[3].value,t=>(r(),V(k,{key:t,label:t,name:t},null,8,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),c("div",xe,[e(i,{class:"box-item",effect:"dark",content:"歪斜、損毀、漏缺 ，該站所有抽測車輛都要扣分",placement:"top-start"},{default:o(()=>[e(u,{size:"20",color:"#ADADAD"},{default:o(()=>[e(d)]),_:1})]),_:1}),e(s,{label:l.value.checkdata[4].title},{default:o(()=>[e(h,{modelValue:l.value.checkdata[4].ischeck,"onUpdate:modelValue":a[9]||(a[9]=t=>l.value.checkdata[4].ischeck=t)},{default:o(()=>[(r(!0),p(g,null,y(l.value.checkdata[4].value,t=>(r(),V(k,{key:t,label:t,name:t},null,8,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),e(s,null,{default:o(()=>[e(B,{type:"primary",onClick:a[10]||(a[10]=t=>C(E.value)),class:"col-12"},{default:o(()=>[x("送出表單")]),_:1})]),_:1})])):l.value.catequery==="2.0+2.0E"?(r(),p("div",Ee,[c("div",Ue,[e(s,{label:"場站名稱",prop:"name"},{default:o(()=>[e(_,{modelValue:l.value.name,"onUpdate:modelValue":a[11]||(a[11]=t=>l.value.name=t),style:{width:"100%"},filterable:"",remote:"","remote-method":$,clearable:"",options:S.value,loading:D.value,placeholder:"請輸入場站名稱"},null,8,["modelValue","options","loading"])]),_:1})]),c("div",qe,[e(s,{label:"場站車輛數",prop:"carnum"},{default:o(()=>[e(m,{placeholder:"請輸入場站車輛數",modelValue:l.value.carnum,"onUpdate:modelValue":a[12]||(a[12]=t=>l.value.carnum=t),type:"number",inputmode:"numeric"},null,8,["modelValue"])]),_:1})]),c("div",Ce,[e(i,{class:"box-item",effect:"dark",content:"坐墊反轉、無法喚醒車機、車機顯示電量過低或暫停服務",placement:"top-start"},{default:o(()=>[e(u,{size:"20",color:"#ADADAD"},{default:o(()=>[e(d)]),_:1})]),_:1}),e(s,{label:"無法租借車輛數",prop:"nosencarnum"},{default:o(()=>[e(z,{title:"坐墊反轉、無法喚醒車機、車機顯示電量過低或暫停服務",type:"warning ",closable:!1,class:"my-1"}),e(m,{placeholder:"請輸入無法租借車輛數",modelValue:l.value.nosencarnum,"onUpdate:modelValue":a[13]||(a[13]=t=>l.value.nosencarnum=t),type:"number",inputmode:"numeric"},null,8,["modelValue"])]),_:1})]),c("div",Ie,[e(i,{class:"box-item",effect:"dark",content:"歪斜、損毀、漏缺 ，該站所有抽測車輛都要扣分",placement:"top-start"},{default:o(()=>[e(u,{size:"20",color:"#ADADAD"},{default:o(()=>[e(d)]),_:1})]),_:1}),e(s,{label:l.value.checkdata[4].title},{default:o(()=>[e(h,{modelValue:l.value.checkdata[4].ischeck,"onUpdate:modelValue":a[14]||(a[14]=t=>l.value.checkdata[4].ischeck=t)},{default:o(()=>[(r(!0),p(g,null,y(l.value.checkdata[4].value,t=>(r(),V(k,{key:t,label:t,name:t},null,8,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),e(s,null,{default:o(()=>[e(B,{type:"primary",onClick:a[15]||(a[15]=t=>C(E.value)),class:"col-12"},{default:o(()=>[x("送出表單")]),_:1})]),_:1})])):Z("",!0)]),_:1},8,["model","rules"])])}}});const Je=Q(Ke,[["__scopeId","data-v-ba724e53"]]);export{Je as default};
