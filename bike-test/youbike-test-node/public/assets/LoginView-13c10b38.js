/* empty css             *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                 */import{d as h,u as E,r,c as g,a as s,b as $,w as d,E as C,o as w,e as a,f as b,g as D,h as B,i as F,j as I,k as L,l as N,m as U}from"./index-0bfd0be3.js";import{L as K}from"./index-13bc4fcc.js";const R="/login(5.12).jpg",T={class:"container"},j={class:"row"},q=a("div",{class:"col-12 mb-3"},[a("img",{src:R,alt:"首頁圖片",class:"img-fluid"})],-1),z={class:"col-12 mb-3"},A={class:"col-12 mb-3"},P={key:0,class:"col mb-3"},S={class:"col-12"},Y=h({__name:"LoginView",setup(G){const y=E(),l=r(!1),u=r(),t=r({account:"",password:""}),k=r({account:[{required:!0,message:"請輸入帳號",trigger:"blur"}],password:[{required:!0,message:"請輸入密碼",trigger:"blur"}]}),x=()=>{t.value.account=t.value.account.toUpperCase()},i=r(!1),m=async v=>{i.value&&await new Promise(e=>setTimeout(()=>{i.value=!1,e()},100)),v&&v.validate(async e=>{if(!e)return!1;const c="https://simulation.youbike.com.tw",p={account:t.value.account,password:t.value.password};try{l.value=!0;const n=await F.post(`${c}/member/login`,p);l.value=!1;const{token:_}=n.data,f=new Date,V=new Date(f.getTime()+8*60*60*1e3).toString();document.cookie=`youbiketest=${_}; expires=${V};path=/;`,y.push("/server/mainpage")}catch(n){console.log(n),i.value=!0,l.value=!1}})};return(v,e)=>{const c=I,p=L,n=N,_=U,f=C;return w(),g("div",T,[s($(K),{active:l.value,"onUpdate:active":e[0]||(e[0]=o=>l.value=o),"can-cancel":!1,"is-full-page":!0},null,8,["active"]),s(f,{model:t.value,size:"large","label-width":"120px","label-position":"top",ref_key:"formRef",ref:u,rules:k.value},{default:d(()=>[a("div",j,[q,a("div",z,[s(p,{label:"帳號:",prop:"account"},{default:d(()=>[s(c,{type:"text",modelValue:t.value.account,"onUpdate:modelValue":e[1]||(e[1]=o=>t.value.account=o),placeholder:"請輸入帳號",onInput:x,onKeyup:e[2]||(e[2]=b(o=>m(u.value),["enter"]))},null,8,["modelValue"])]),_:1})]),a("div",A,[s(p,{label:"密碼:",prop:"password"},{default:d(()=>[s(c,{type:"password",modelValue:t.value.password,"onUpdate:modelValue":e[3]||(e[3]=o=>t.value.password=o),placeholder:"請輸入密碼",onKeyup:e[4]||(e[4]=b(o=>m(u.value),["enter"]))},null,8,["modelValue"])]),_:1})]),i.value?(w(),g("div",P,[s(n,{title:"錯誤",description:"帳號或密碼錯誤","show-icon":"",type:"error"})])):D("",!0),a("div",S,[s(_,{type:"primary",size:"large",class:"col-12 fs-5",onClick:e[5]||(e[5]=o=>m(u.value))},{default:d(()=>[B("登入")]),_:1})])])]),_:1},8,["model","rules"])])}}});export{Y as default};
