/* empty css             *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                 *//* empty css                  *//* empty css                */import{_ as O}from"./_plugin-vue_export-helper-30db3103.js";import{d as Y,u as J,ab as K,r as b,a3 as W,ac as X,c as p,e as c,a as t,w as o,a4 as _,E as Z,o as i,ad as S,ae as B,h as m,g as ee,af as te,ag as le,i as ae,am as oe,k as se,aj as ne,ak as ce,cw as re,cx as ue,j as ie,m as de,an as me}from"./index-0bfd0be3.js";import{_ as pe}from"./PhotoComponent.vue_vue_type_script_setup_true_lang-f757ad49.js";import{u as _e}from"./bikestest-a2ceefd7.js";import{u as fe}from"./auth-00379faa.js";const g=w=>(te("data-v-1b4c28a3"),w=w(),le(),w),ve={class:"container-fluid"},ke=g(()=>c("p",{class:"fs-1 mb-2 text-center"},"模擬體驗",-1)),he={class:"row"},be={class:"col-12 mb-1"},ge={class:"col-12 mb-1"},we=g(()=>c("br",null,null,-1)),ye=g(()=>c("br",null,null,-1)),Ve={class:"col-12 mb-1"},xe={class:"col-12 mb-1"},Se={class:"col-12 mb-1"},Be={class:"row mx-auto"},De={class:"col-6"},Ee={class:"col-6"},Ce={class:"col-12 mb-1"},$e={class:"col-12 mb-1"},Ae={class:"col-12 mb-1"},qe=g(()=>c("br",null,null,-1)),Te=g(()=>c("br",null,null,-1)),Fe={class:"row mx-auto"},Ie={class:"col-6"},Me={class:"col-6"},Ue=Y({__name:"BiketestStepeight",setup(w){const y=J(),v=K("$swal");async function F(){return!!(await v({icon:"warning",title:"是否提交表單",showCancelButton:!0,confirmButtonText:"是",cancelButtonText:"否"})).isConfirmed}async function I(){let n;await v({icon:"success",title:"表單送出成功",html:"將導到拍照頁面...",timer:2500,timerProgressBar:!0,didOpen:()=>{v.showLoading(),v.getPopup().querySelector("b")},willClose:()=>{clearInterval(n)}})}async function M(){return!!(await v({icon:"warning",title:"是否需要拍照",showCancelButton:!0,cancelButtonText:"否",confirmButtonText:"是"})).isConfirmed}const D=b(),e=b({catequery:"1.0",startrow:null,endrow:null,text:"",iscodepass:null,checkdata:[{title:"騎乘行進",ischeck:[],value:["行進不順暢","異音"]},{title:"煞車功能",ischeck:[],value:["無法煞車","煞車過鬆 ( 2/3仍無法煞停 )","煞車過緊 ( 未滿1/3已經煞停 )","異音"]},{title:"變速功能",ischeck:[],value:["指示蓋 (銀) 脫落","上蓋 (黑) 脫落／檔位標示無法辨識","換檔轉動不順 ( 2轉3過緊 )","檔位無法定位","實際騎乘無法變速"]},{title:"隨車鎖",ischeck:[],value:["貼紙文字無法傳達完整訊息","鎖孔  生鏽／脫漆","上鎖／解鎖 失敗、異常","鎖體  面積10%生鏽"]}]}),U=b({iscodepass:[{required:!0,message:"掃瑪借車不能為空",trigger:"blur"}],startrow:[{required:!0,message:"前胎壓不能為空",trigger:"blur"}],endrow:[{required:!0,message:"後胎壓不能為空",trigger:"blur"}]}),R=()=>{window.scrollTo({top:0,behavior:"smooth"})},s=_e();W(()=>{R(),s.step.step8||y.push("/server/biketest/BiketestStepseven"),s.systum==="1.0"?e.value.catequery="1.0":s.systum==="2.0"?e.value.catequery="2.0":e.value.catequery="2.0E",N()});const N=()=>{var a,d,u;const n=s.systum;n==="1.0"?(console.log("現在系統是1.0,賦予資料中..."),console.log("不需要保存資料,因為1.0這是最後一頁")):n==="2.0"?(console.log("現在系統是2.0,賦予資料中..."),console.log("不需要保存資料,因為2.0這是最後一頁")):n==="2.0E"?(console.log("現在系統是2.0E,賦予資料中..."),e.value.checkdata[1].ischeck=(a=s.testfrom3.煞車功能)==null?void 0:a.ischeck,e.value.checkdata[2].ischeck=(d=s.testfrom3.變速功能)==null?void 0:d.ischeck,e.value.checkdata[3].ischeck=(u=s.testfrom3.隨車鎖)==null?void 0:u.ischeck):console.log("現在沒有系統")};function j(){const n=new Date,a=n.getFullYear(),d=String(n.getMonth()+1).padStart(2,"0"),u=String(n.getDate()).padStart(2,"0"),r=String(n.getHours()).padStart(2,"0"),k=String(n.getMinutes()).padStart(2,"0"),f=String(n.getSeconds()).padStart(2,"0");return`${a}-${d}-${u} ${r}:${k}:${f}`}const E=b(!1),$=b({});function P(){E.value=!0}function Q(){E.value=!1}function A(){s.clearfrom(),s.clearstep(),y.push("/server/bikesubmit")}const z=fe(),{account:L}=z.getUserid(),q=async n=>{if(n)try{if(await n.validate(),e.value.catequery==="1.0")return;if(e.value.catequery==="2.0"){if(!await F())return;s.testfrom2.騎乘行進=e.value.checkdata[0],s.testfrom2.iscodepass=e.value.iscodepass,s.testfrom2.startrow=e.value.startrow,s.testfrom2.endrow=e.value.endrow,s.testfrom2.text=e.value.text;const d="https://simulation.youbike.com.tw/biketest/biketest",u=s.testfrom2.station_name.split("-"),r={sys:s.systum,user_id:L,edit_id:"",test_date:j(),station_name:`${u[0]}-${u[1]}`,carnum:s.testfrom2.carnum,carnum2:s.testfrom2.carnum2,tablejson:s.testfrom2};if(await ae.post(d,r),await I(),!await M())A();else{const f=new Date,h=f.getMonth()+1,V=f.getDate();$.value={payload:`(${h}-${V})-${s.testfrom2.carnum}`},P();return}}else e.value.catequery==="2.0E"&&(s.testfrom3.煞車功能=e.value.checkdata[1],s.testfrom3.變速功能=e.value.checkdata[2],s.testfrom3.隨車鎖=e.value.checkdata[3],console.log("送出2.0E"),s.step.step9=!0,y.push("/server/biketest/BiketestStepnine"))}catch{console.log("驗證失敗")}};window.addEventListener("beforeunload",function(n){const a="您確定要離開此頁面嗎？您的未保存更改將丟失。";n.returnValue=a,confirm(a)||n.preventDefault()});const T=()=>{s.step.step8=!1,y.push("/server/biketest/BiketestStepseven")};return(n,a)=>{const d=me,u=oe,r=se,k=X("QuestionFilled"),f=ne,h=ce,V=re,G=ue,C=ie,x=de,H=Z;return i(),p(_,null,[c("div",ve,[ke,t(H,{"label-width":"120px",size:"large","label-position":"top",model:e.value,ref_key:"formRefAll",ref:D,rules:U.value},{default:o(()=>[c("div",he,[e.value.catequery==="1.0"?(i(),p(_,{key:0},[],64)):e.value.catequery==="2.0"?(i(),p(_,{key:1},[c("div",be,[t(r,{label:e.value.checkdata[0].title},{default:o(()=>[t(u,{modelValue:e.value.checkdata[0].ischeck,"onUpdate:modelValue":a[0]||(a[0]=l=>e.value.checkdata[0].ischeck=l)},{default:o(()=>[(i(!0),p(_,null,S(e.value.checkdata[0].value,l=>(i(),B(d,{key:l,label:l,name:l},null,8,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),c("div",ge,[t(h,{class:"box-item",effect:"dark",placement:"top-start"},{content:o(()=>[m(" 此為檢驗QR識別效果,無須測試輸入驗證碼"),we,m(" 同站借還5分鐘不扣款"),ye,m(" 無法於啟動掃碼一次螢幕熄滅內識別QR即為失敗 ")]),default:o(()=>[t(f,{size:"20",color:"#ADADAD"},{default:o(()=>[t(k)]),_:1})]),_:1}),t(r,{label:"掃碼借車",prop:"iscodepass"},{default:o(()=>[t(G,{modelValue:e.value.iscodepass,"onUpdate:modelValue":a[1]||(a[1]=l=>e.value.iscodepass=l)},{default:o(()=>[t(V,{label:"是"}),t(V,{label:"否"})]),_:1},8,["modelValue"])]),_:1})]),c("div",Ve,[t(r,{label:"前胎壓",prop:"startrow"},{default:o(()=>[t(C,{placeholder:"請輸入前胎壓",modelValue:e.value.startrow,"onUpdate:modelValue":a[2]||(a[2]=l=>e.value.startrow=l),type:"number",inputmode:"numeric"},null,8,["modelValue"])]),_:1})]),c("div",xe,[t(r,{label:"後胎壓",prop:"endrow"},{default:o(()=>[t(C,{placeholder:"請輸入後胎壓",modelValue:e.value.endrow,"onUpdate:modelValue":a[3]||(a[3]=l=>e.value.endrow=l),type:"number",inputmode:"numeric"},null,8,["modelValue"])]),_:1})]),c("div",Se,[t(r,{label:"備註"},{default:o(()=>[t(C,{type:"textarea",modelValue:e.value.text,"onUpdate:modelValue":a[4]||(a[4]=l=>e.value.text=l)},null,8,["modelValue"])]),_:1})]),c("div",Be,[c("div",De,[t(r,null,{default:o(()=>[t(x,{type:"primary",plain:"",class:"col-12",onClick:T},{default:o(()=>[m("上一步")]),_:1})]),_:1})]),c("div",Ee,[t(r,null,{default:o(()=>[t(x,{type:"primary",plain:"",class:"col-12",onClick:a[5]||(a[5]=l=>q(D.value))},{default:o(()=>[m("完成")]),_:1})]),_:1})])])],64)):e.value.catequery==="2.0E"?(i(),p(_,{key:2},[c("div",Ce,[t(r,{label:e.value.checkdata[1].title},{default:o(()=>[t(u,{modelValue:e.value.checkdata[1].ischeck,"onUpdate:modelValue":a[6]||(a[6]=l=>e.value.checkdata[1].ischeck=l)},{default:o(()=>[(i(!0),p(_,null,S(e.value.checkdata[1].value,l=>(i(),B(d,{key:l,label:l,name:l},null,8,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),c("div",$e,[t(r,{label:e.value.checkdata[2].title},{default:o(()=>[t(u,{modelValue:e.value.checkdata[2].ischeck,"onUpdate:modelValue":a[7]||(a[7]=l=>e.value.checkdata[2].ischeck=l)},{default:o(()=>[(i(!0),p(_,null,S(e.value.checkdata[2].value,l=>(i(),B(d,{key:l,label:l,name:l},null,8,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),c("div",Ae,[t(h,{class:"box-item",effect:"dark",placement:"top-start"},{content:o(()=>[m(" 隨車鎖異常 : 車機文字顯示"),qe,m(" 上鎖成功 → 插銷可抽出"),Te,m(" 解鎖成功 → 插銷抽不出 ")]),default:o(()=>[t(f,{size:"20",color:"#ADADAD"},{default:o(()=>[t(k)]),_:1})]),_:1}),t(r,{label:e.value.checkdata[3].title},{default:o(()=>[t(u,{modelValue:e.value.checkdata[3].ischeck,"onUpdate:modelValue":a[8]||(a[8]=l=>e.value.checkdata[3].ischeck=l)},{default:o(()=>[(i(!0),p(_,null,S(e.value.checkdata[3].value,l=>(i(),B(d,{key:l,label:l,name:l},null,8,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),c("div",Fe,[c("div",Ie,[t(r,null,{default:o(()=>[t(x,{type:"primary",plain:"",class:"col-12",onClick:T},{default:o(()=>[m("上一步")]),_:1})]),_:1})]),c("div",Me,[t(r,null,{default:o(()=>[t(x,{type:"primary",plain:"",class:"col-12",onClick:a[9]||(a[9]=l=>q(D.value))},{default:o(()=>[m("下一步")]),_:1})]),_:1})])])],64)):ee("",!0)])]),_:1},8,["model","rules"])]),t(pe,{centerDialogVisible:E.value,onCloseModal:Q,"upload-data":$.value,onSubmitFrom:A},null,8,["centerDialogVisible","upload-data"])],64)}}});const Ke=O(Ue,[["__scopeId","data-v-1b4c28a3"]]);export{Ke as default};
