/* empty css             *//* empty css                     *//* empty css                  */import{_ as R}from"./_plugin-vue_export-helper-30db3103.js";/* empty css                  *//* empty css                 *//* empty css               *//* empty css                *//* empty css                  */import{L as Q}from"./index-efef9a23.js";import{d as G,u as H,ab as Y,r as v,ac as J,c as p,a as e,b as P,w as o,i as U,E as W,o as r,e as c,h as x,a4 as g,ad as y,ae as V,g as X,af as Z,ag as ee,ah as te,ai as ae,k as le,aj as oe,ak as ne,al as se,j as ue,am as ce,m as re,an as de}from"./index-11f761f1.js";import{u as ie}from"./auth-98e99ec2.js";const B=w=>(Z("data-v-0a880dd9"),w=w(),ee(),w),me={class:"container-fluid"},pe=B(()=>c("p",{class:"fs-1 text-center"},"場站檢驗",-1)),_e={class:"row"},ve={class:"col-12 mb-3"},fe={key:0,class:"row"},be={class:"col-12 mb-3"},ke=B(()=>c("br",null,null,-1)),he={class:"col-12 mb-1"},ge={class:"col-12 mb-1"},ye={class:"col-12 mb-3"},Ve={class:"col-12 mb-3"},Se={class:"col-12 mb-3"},we={class:"col-12 mb-3"},Ae={class:"col-12 mb-3"},De={key:1,class:"row"},xe={class:"col-12 mb-3"},Ee={class:"col-12 mb-1"},Ue={class:"col-12 mb-1"},qe={class:"col-12 mb-3"},Ce=G({__name:"StationtestView",setup(w){const F=H(),L=Y("$swal");async function N(){return!!(await L({icon:"warning",title:"是否提交表單",showCancelButton:!0,confirmButtonText:"是",cancelButtonText:"否"})).isConfirmed}const E=v(),l=v({name:"",catequery:"",carnum:null,nosencarnum:null,checkdata:[{title:"場站周遭環境",ischeck:[],value:["停車柱","基板","垃圾多"]},{title:"KIOSK功能",ischeck:[],value:["黑屏、畫面無反應","內容站點資訊不清楚"]},{title:"KIOSK外觀",ischeck:[],value:["嚴重髒汙","廣告貼紙","塗鴉","正面Logo貼紙褪色"]},{title:"KIOSK燈片",ischeck:[],value:["站名牌","後燈片使用說明"]},{title:"場站導標桿",ischeck:[],value:["歪斜、損毀","漏缺"]}]}),O=v({name:[{required:!0,message:"場站名稱不能為空",trigger:"blur"}],catequery:[{required:!0,message:"系統別不能為空",trigger:"blur"}],carnum:[{required:!0,message:"場站車輛數不能為空",trigger:"blur"}],nosencarnum:[{required:!0,message:"無法租借車輛數不能為空",trigger:"blur"}]}),q=()=>{const n=new Date,a=n.getFullYear(),f=String(n.getMonth()+1).padStart(2,"0"),b=String(n.getDate()).padStart(2,"0"),s=String(n.getHours()).padStart(2,"0"),d=String(n.getMinutes()).padStart(2,"0"),u=String(n.getSeconds()).padStart(2,"0");return`${a}-${f}-${b} ${s}:${d}:${u}`},T=ie(),A=v(!1),C=async n=>{if(n)try{if(await n.validate(),!await N())return;const{catequery:f,name:b,carnum:s,nosencarnum:d,checkdata:u}=l.value;A.value=!0;const{account:i}=T.getUserid();if(l.value.catequery==="1.0"){const _="https://simulation.youbike.com.tw/station/station_1";try{const m={date:q(),user_id:i,edit_id:"",station_name:b,sys:f,carnum:s,no_carnum:d,場站周遭環境:u[0].ischeck,KIOSK功能:u[1].ischeck,KIOSK外觀:u[2].ischeck,KIOSK燈片:u[3].ischeck,場站導標桿:u[4].ischeck};await U.post(_,m)}catch(m){console.log(m)}}else try{const _="https://simulation.youbike.com.tw/station/station_2",m={date:q(),user_id:i,edit_id:"",station_name:b,sys:f,carnum:s,no_carnum:d,場站導標桿:u[4].ischeck};await U.post(_,m)}catch(_){console.log(_)}A.value=!1,F.push("/server/stationsubmit")}catch{console.log("驗證失敗")}},I=v([]);(async()=>{try{const n="https://simulation.youbike.com.tw/station/stations",a=await U.get(n);I.value=a.data.data}catch(n){console.log(n)}})();const K=v([]),D=v(!1),S=v([]),j=async()=>{l.value.name=null,S.value=[];const n=[];I.value.forEach(a=>{l.value.catequery==="1.0"?a.Sys==="1.0"&&n.push({value:a.Station_Name,label:a.Station_Name}):a.Sys!=="1.0"&&n.push({value:a.Station_Name,label:a.Station_Name})}),K.value=[...n]},$=n=>{n?(D.value=!0,setTimeout(()=>{D.value=!1,S.value=K.value.filter(a=>a.label.toLowerCase().includes(n.toLowerCase()))},200)):S.value=[]};return(n,a)=>{const f=te,b=ae,s=le,d=J("QuestionFilled"),u=oe,i=ne,_=se,m=ue,k=de,h=ce,z=re,M=W;return r(),p("div",me,[e(P(Q),{active:A.value,"onUpdate:active":a[0]||(a[0]=t=>A.value=t),"can-cancel":!1,"is-full-page":!0},null,8,["active"]),pe,e(M,{"label-width":"120px",size:"large","label-position":"top",model:l.value,ref_key:"formRefAll",ref:E,rules:O.value},{default:o(()=>[c("div",_e,[c("div",ve,[e(s,{label:"系統別",prop:"catequery"},{default:o(()=>[e(b,{placeholder:"請選擇系統別",class:"col-12",onChange:j,modelValue:l.value.catequery,"onUpdate:modelValue":a[1]||(a[1]=t=>l.value.catequery=t)},{default:o(()=>[e(f,{label:"1.0",value:"1.0"}),e(f,{label:"2.0+2.0E",value:"2.0+2.0E"})]),_:1},8,["modelValue"])]),_:1})])]),l.value.catequery==="1.0"?(r(),p("div",fe,[c("div",be,[e(i,{class:"box-item",effect:"dark",placement:"top-start"},{content:o(()=>[x(" 若搜尋不到場站，請先重新整理頁面。"),ke,x("如仍無出現場站，請選擇同一城市任一場站，並於第一輛車中備註實際檢驗場站名稱。 ")]),default:o(()=>[e(u,{size:"20",color:"#ADADAD"},{default:o(()=>[e(d)]),_:1})]),_:1}),e(s,{label:"場站名稱",prop:"name"},{default:o(()=>[e(_,{modelValue:l.value.name,"onUpdate:modelValue":a[2]||(a[2]=t=>l.value.name=t),style:{width:"100%"},filterable:"",remote:"","remote-method":$,clearable:"",options:S.value,loading:D.value,placeholder:"請輸入場站名稱"},null,8,["modelValue","options","loading"])]),_:1})]),c("div",he,[e(s,{label:"場站車輛數",prop:"carnum"},{default:o(()=>[e(m,{placeholder:"請輸入場站車輛數",modelValue:l.value.carnum,"onUpdate:modelValue":a[3]||(a[3]=t=>l.value.carnum=t),type:"number",inputmode:"numeric"},null,8,["modelValue"])]),_:1})]),c("div",ge,[e(i,{class:"box-item",effect:"dark",content:"坐墊反轉／亮紅燈",placement:"top-start"},{default:o(()=>[e(u,{size:"20",color:"#ADADAD"},{default:o(()=>[e(d)]),_:1})]),_:1}),e(s,{label:"無法租借車輛數",prop:"nosencarnum"},{default:o(()=>[e(m,{placeholder:"請輸入無法租借車輛數",modelValue:l.value.nosencarnum,"onUpdate:modelValue":a[4]||(a[4]=t=>l.value.nosencarnum=t),type:"number",inputmode:"numeric"},null,8,["modelValue"])]),_:1})]),c("div",ye,[e(i,{class:"box-item",effect:"dark",content:"髒汙、脫漆 、鏽蝕",placement:"top-start"},{default:o(()=>[e(u,{size:"20",color:"#ADADAD"},{default:o(()=>[e(d)]),_:1})]),_:1}),e(s,{label:l.value.checkdata[0].title},{default:o(()=>[e(h,{modelValue:l.value.checkdata[0].ischeck,"onUpdate:modelValue":a[5]||(a[5]=t=>l.value.checkdata[0].ischeck=t)},{default:o(()=>[(r(!0),p(g,null,y(l.value.checkdata[0].value,t=>(r(),V(k,{key:t,label:t,name:t},null,8,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),c("div",Ve,[e(s,{label:l.value.checkdata[1].title},{default:o(()=>[e(h,{modelValue:l.value.checkdata[1].ischeck,"onUpdate:modelValue":a[6]||(a[6]=t=>l.value.checkdata[1].ischeck=t)},{default:o(()=>[(r(!0),p(g,null,y(l.value.checkdata[1].value,t=>(r(),V(k,{key:t,label:t,name:t},null,8,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),c("div",Se,[e(s,{label:l.value.checkdata[2].title},{default:o(()=>[e(h,{modelValue:l.value.checkdata[2].ischeck,"onUpdate:modelValue":a[7]||(a[7]=t=>l.value.checkdata[2].ischeck=t)},{default:o(()=>[(r(!0),p(g,null,y(l.value.checkdata[2].value,t=>(r(),V(k,{key:t,label:t,name:t},null,8,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),c("div",we,[e(i,{class:"box-item",effect:"dark",content:"褪色、變色、髒汙",placement:"top-start"},{default:o(()=>[e(u,{size:"20",color:"#ADADAD"},{default:o(()=>[e(d)]),_:1})]),_:1}),e(s,{label:l.value.checkdata[3].title},{default:o(()=>[e(h,{modelValue:l.value.checkdata[3].ischeck,"onUpdate:modelValue":a[8]||(a[8]=t=>l.value.checkdata[3].ischeck=t)},{default:o(()=>[(r(!0),p(g,null,y(l.value.checkdata[3].value,t=>(r(),V(k,{key:t,label:t,name:t},null,8,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),c("div",Ae,[e(i,{class:"box-item",effect:"dark",content:"歪斜、損毀、漏缺 ，該站所有抽測車輛都要扣分",placement:"top-start"},{default:o(()=>[e(u,{size:"20",color:"#ADADAD"},{default:o(()=>[e(d)]),_:1})]),_:1}),e(s,{label:l.value.checkdata[4].title},{default:o(()=>[e(h,{modelValue:l.value.checkdata[4].ischeck,"onUpdate:modelValue":a[9]||(a[9]=t=>l.value.checkdata[4].ischeck=t)},{default:o(()=>[(r(!0),p(g,null,y(l.value.checkdata[4].value,t=>(r(),V(k,{key:t,label:t,name:t},null,8,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),e(s,null,{default:o(()=>[e(z,{type:"primary",onClick:a[10]||(a[10]=t=>C(E.value)),class:"col-12"},{default:o(()=>[x("送出表單")]),_:1})]),_:1})])):l.value.catequery==="2.0+2.0E"?(r(),p("div",De,[c("div",xe,[e(s,{label:"場站名稱",prop:"name"},{default:o(()=>[e(_,{modelValue:l.value.name,"onUpdate:modelValue":a[11]||(a[11]=t=>l.value.name=t),style:{width:"100%"},filterable:"",remote:"","remote-method":$,clearable:"",options:S.value,loading:D.value,placeholder:"請輸入場站名稱"},null,8,["modelValue","options","loading"])]),_:1})]),c("div",Ee,[e(s,{label:"場站車輛數",prop:"carnum"},{default:o(()=>[e(m,{placeholder:"請輸入場站車輛數",modelValue:l.value.carnum,"onUpdate:modelValue":a[12]||(a[12]=t=>l.value.carnum=t),type:"number",inputmode:"numeric"},null,8,["modelValue"])]),_:1})]),c("div",Ue,[e(i,{class:"box-item",effect:"dark",content:"坐墊反轉、無法喚醒車機、車機顯示電量過低或暫停服務",placement:"top-start"},{default:o(()=>[e(u,{size:"20",color:"#ADADAD"},{default:o(()=>[e(d)]),_:1})]),_:1}),e(s,{label:"無法租借車輛數",prop:"nosencarnum"},{default:o(()=>[e(m,{placeholder:"請輸入無法租借車輛數",modelValue:l.value.nosencarnum,"onUpdate:modelValue":a[13]||(a[13]=t=>l.value.nosencarnum=t),type:"number",inputmode:"numeric"},null,8,["modelValue"])]),_:1})]),c("div",qe,[e(i,{class:"box-item",effect:"dark",content:"歪斜、損毀、漏缺 ，該站所有抽測車輛都要扣分",placement:"top-start"},{default:o(()=>[e(u,{size:"20",color:"#ADADAD"},{default:o(()=>[e(d)]),_:1})]),_:1}),e(s,{label:l.value.checkdata[4].title},{default:o(()=>[e(h,{modelValue:l.value.checkdata[4].ischeck,"onUpdate:modelValue":a[14]||(a[14]=t=>l.value.checkdata[4].ischeck=t)},{default:o(()=>[(r(!0),p(g,null,y(l.value.checkdata[4].value,t=>(r(),V(k,{key:t,label:t,name:t},null,8,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),e(s,null,{default:o(()=>[e(z,{type:"primary",onClick:a[15]||(a[15]=t=>C(E.value)),class:"col-12"},{default:o(()=>[x("送出表單")]),_:1})]),_:1})])):X("",!0)]),_:1},8,["model","rules"])])}}});const Qe=R(Ce,[["__scopeId","data-v-0a880dd9"]]);export{Qe as default};
