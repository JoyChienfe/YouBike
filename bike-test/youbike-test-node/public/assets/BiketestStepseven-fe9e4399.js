/* empty css             *//* empty css                     *//* empty css                  *//* empty css                *//* empty css                  *//* empty css                 */import{_ as G}from"./_plugin-vue_export-helper-30db3103.js";/* empty css                    */import{d as H,u as O,ab as Y,r as g,a3 as J,ac as K,c as p,e as c,a as l,w as a,a4 as k,E as W,o as r,ad as h,ae as b,h as _,g as X,af as Z,ag as ee,i as te,am as le,k as ae,j as oe,m as se,aj as ce,ak as ne,an as ue}from"./index-62a9fa75.js";import{_ as re}from"./PhotoComponent.vue_vue_type_script_setup_true_lang-6f7a4a6e.js";import{u as ie}from"./bikestest-50d59575.js";import{u as de}from"./auth-c9b42ca7.js";const $=V=>(Z("data-v-5099cb0b"),V=V(),ee(),V),me={class:"container-fluid"},pe=$(()=>c("p",{class:"fs-1 mb-2 text-center"},"模擬體驗",-1)),ke={class:"row"},ve={class:"col-12 mb-1"},fe={class:"col-12 mb-1"},_e={class:"col-12 mb-1"},he={class:"col-12 mb-1"},be={class:"row mx-auto"},ye={class:"col-6"},we={class:"col-6"},ge={class:"col-12 mb-1"},Ve={class:"col-12 mb-1"},xe={class:"col-12 mb-1"},De=$(()=>c("br",null,null,-1)),Se=$(()=>c("br",null,null,-1)),Ae={class:"row mx-auto"},Be={class:"col-6"},Ce={class:"col-6"},$e={class:"col-12 mb-1"},Ee={class:"col-12 mb-1"},Te={class:"col-12 mb-1"},qe={class:"col-12 mb-1"},Ue={class:"row mx-auto"},Fe={class:"col-6"},Ie={class:"col-6"},Me=H({__name:"BiketestStepseven",setup(V){const x=O(),w=Y("$swal");async function q(){return!!(await w({icon:"warning",title:"是否提交表單",showCancelButton:!0,confirmButtonText:"是",cancelButtonText:"否"})).isConfirmed}async function U(){let u;await w({icon:"success",title:"表單送出成功",html:"將導到拍照頁面...",timer:2500,timerProgressBar:!0,didOpen:()=>{w.showLoading(),w.getPopup().querySelector("b")},willClose:()=>{clearInterval(u)}})}async function F(){return!!(await w({icon:"warning",title:"是否需要拍照",showCancelButton:!0,cancelButtonText:"否",confirmButtonText:"是"})).isConfirmed}const D=g(),e=g({catequery:"1.0",startrow:null,endrow:null,text:"",checkdata:[{title:"騎乘行進",ischeck:[],value:["前後輪無法順暢轉動","異音"]},{title:"煞車功能",ischeck:[],value:["無法煞車","煞車過鬆 ( 2/3仍無法煞停 )","煞車過緊 ( 未滿1/3已經煞停 )","異音"]},{title:"變速功能",ischeck:[],value:["指示蓋 (銀) 脫落","上蓋 (黑) 脫落／檔位標示無法辨識","換檔轉動不順 ( 2轉3過緊 )","檔位無法定位","實際騎乘無法變速"]},{title:"隨車鎖",ischeck:[],value:["貼紙文字無法傳達完整訊息","鎖孔  生鏽／脫漆","上鎖／解鎖 失敗、異常","鎖體  面積10%生鏽"]},{title:"輪胎",ischeck:[],value:["胎紋磨損 平滑、龜裂、反光帶脫落","輪框變形、缺鋼絲","前 或 後輪偏擺"]},{title:"前後輪軸螺絲",ischeck:[],value:["前","後"]},{title:"前／後燈(行進車輪轉動中)",ischeck:[],value:["前燈","後燈","前燈線　未妥善固定或絕緣膠翹起"]},{title:"前／後燈(暫停車輪靜止中)",ischeck:[],value:["借出刷卡、臨停解鎖即亮【未即亮勾選】","歸還靠柱、臨停上鎖即滅【未滅勾選】","借出後應恆亮【閃爍、時滅時亮勾選】"]}]}),I=g({startrow:[{required:!0,message:"前胎壓不能為空",trigger:"blur"}],endrow:[{required:!0,message:"後胎壓不能為空",trigger:"blur"}]}),M=()=>{window.scrollTo({top:0,behavior:"smooth"})},s=ie();J(()=>{M(),s.step.step7||x.push("/server/biketest/BiketestStepsix"),s.systum==="1.0"?e.value.catequery="1.0":s.systum==="2.0"?e.value.catequery="2.0":e.value.catequery="2.0E",z()});const z=()=>{var o,i,d,n,f,m,v;const u=s.systum;u==="1.0"?(console.log("現在系統是1.0,賦予資料中..."),console.log("不需要保存資料,因為1.0這是最後一頁")):u==="2.0"?(console.log("現在系統是2.0,賦予資料中..."),e.value.checkdata[1].ischeck=(o=s.testfrom2.煞車功能)==null?void 0:o.ischeck,e.value.checkdata[2].ischeck=(i=s.testfrom2.變速功能)==null?void 0:i.ischeck,e.value.checkdata[3].ischeck=(d=s.testfrom2.隨車鎖)==null?void 0:d.ischeck):u==="2.0E"?(console.log("現在系統是2.0E,賦予資料中..."),e.value.checkdata[4].ischeck=(n=s.testfrom3.輪胎)==null?void 0:n.ischeck,e.value.checkdata[5].ischeck=(f=s.testfrom3.前後輪軸螺絲)==null?void 0:f.ischeck,e.value.checkdata[6].ischeck=(m=s.testfrom3["前／後燈(行進車輪轉動中)"])==null?void 0:m.ischeck,e.value.checkdata[7].ischeck=(v=s.testfrom3["前／後燈(暫停車輪靜止中)"])==null?void 0:v.ischeck):console.log("現在沒有系統")};function N(){const u=new Date,o=u.getFullYear(),i=String(u.getMonth()+1).padStart(2,"0"),d=String(u.getDate()).padStart(2,"0"),n=String(u.getHours()).padStart(2,"0"),f=String(u.getMinutes()).padStart(2,"0"),m=String(u.getSeconds()).padStart(2,"0");return`${o}-${i}-${d} ${n}:${f}:${m}`}const A=g(!1),E=g({});function j(){A.value=!0}function P(){A.value=!1}function T(){s.clearfrom(),s.clearstep(),x.push("/server/bikesubmit")}const L=de(),{account:R}=L.getUserid(),B=async u=>{if(u)try{if(await u.validate(),e.value.catequery==="1.0"){if(!await q())return;s.testfrom1.騎乘行進=e.value.checkdata[0],s.testfrom1.startrow=e.value.startrow,s.testfrom1.endrow=e.value.endrow,s.testfrom1.text=e.value.text,console.log("送出1.0");const i=s.testfrom1.station_name.split("-"),d={sys:s.systum,user_id:R,edit_id:"",test_date:N(),station_name:`${i[0]}-${i[1]}`,carnum:s.testfrom1.carnum,carnum2:s.testfrom1.carnum2,tablejson:s.testfrom1},n="https://simulation.youbike.com.tw/biketest/biketest";if(await te.post(n,d),await U(),console.log("表單送出成功"),!await F())T();else{const m=new Date,v=m.getMonth()+1,y=m.getDate();E.value={payload:`(${v}-${y})-${s.testfrom1.carnum}`},j()}return}else e.value.catequery==="2.0"?(s.testfrom2.煞車功能=e.value.checkdata[1],s.testfrom2.變速功能=e.value.checkdata[2],s.testfrom2.隨車鎖=e.value.checkdata[3],console.log("送出2.0")):(s.testfrom3.輪胎=e.value.checkdata[4],s.testfrom3.前後輪軸螺絲=e.value.checkdata[5],s.testfrom3["前／後燈(行進車輪轉動中)"]=e.value.checkdata[6],s.testfrom3["前／後燈(暫停車輪靜止中)"]=e.value.checkdata[7],console.log("送出2.0E"));s.step.step8=!0,x.push("/server/biketest/BiketestStepeight")}catch{console.log("驗證失敗")}};window.addEventListener("beforeunload",function(u){const o="您確定要離開此頁面嗎？您的未保存更改將丟失。";u.returnValue=o,confirm(o)||u.preventDefault()});const C=()=>{s.step.step7=!1,x.push("/server/biketest/BiketestStepsix")};return(u,o)=>{const i=ue,d=le,n=ae,f=oe,m=se,v=K("QuestionFilled"),y=ce,S=ne,Q=W;return r(),p(k,null,[c("div",me,[pe,l(Q,{"label-width":"120px",size:"large","label-position":"top",model:e.value,ref_key:"formRefAll",ref:D,rules:I.value},{default:a(()=>[c("div",ke,[e.value.catequery==="1.0"?(r(),p(k,{key:0},[c("div",ve,[l(n,{label:e.value.checkdata[0].title},{default:a(()=>[l(d,{modelValue:e.value.checkdata[0].ischeck,"onUpdate:modelValue":o[0]||(o[0]=t=>e.value.checkdata[0].ischeck=t)},{default:a(()=>[(r(!0),p(k,null,h(e.value.checkdata[0].value,t=>(r(),b(i,{key:t,label:t,name:t},null,8,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),c("div",fe,[l(n,{label:"前胎壓",prop:"startrow"},{default:a(()=>[l(f,{placeholder:"請輸入前胎壓",modelValue:e.value.startrow,"onUpdate:modelValue":o[1]||(o[1]=t=>e.value.startrow=t),type:"number",inputmode:"numeric"},null,8,["modelValue"])]),_:1})]),c("div",_e,[l(n,{label:"後胎壓",prop:"endrow"},{default:a(()=>[l(f,{placeholder:"請輸入後胎壓",modelValue:e.value.endrow,"onUpdate:modelValue":o[2]||(o[2]=t=>e.value.endrow=t),type:"number",inputmode:"numeric"},null,8,["modelValue"])]),_:1})]),c("div",he,[l(n,{label:"備註"},{default:a(()=>[l(f,{type:"textarea",modelValue:e.value.text,"onUpdate:modelValue":o[3]||(o[3]=t=>e.value.text=t)},null,8,["modelValue"])]),_:1})]),c("div",be,[c("div",ye,[l(n,null,{default:a(()=>[l(m,{type:"primary",plain:"",class:"col-12",onClick:C},{default:a(()=>[_("上一步")]),_:1})]),_:1})]),c("div",we,[l(n,null,{default:a(()=>[l(m,{type:"primary",plain:"",class:"col-12",onClick:o[4]||(o[4]=t=>B(D.value))},{default:a(()=>[_("送出")]),_:1})]),_:1})])])],64)):e.value.catequery==="2.0"?(r(),p(k,{key:1},[c("div",ge,[l(n,{label:e.value.checkdata[1].title},{default:a(()=>[l(d,{modelValue:e.value.checkdata[1].ischeck,"onUpdate:modelValue":o[5]||(o[5]=t=>e.value.checkdata[1].ischeck=t)},{default:a(()=>[(r(!0),p(k,null,h(e.value.checkdata[1].value,t=>(r(),b(i,{key:t,label:t,name:t},null,8,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),c("div",Ve,[l(n,{label:e.value.checkdata[2].title},{default:a(()=>[l(d,{modelValue:e.value.checkdata[2].ischeck,"onUpdate:modelValue":o[6]||(o[6]=t=>e.value.checkdata[2].ischeck=t)},{default:a(()=>[(r(!0),p(k,null,h(e.value.checkdata[2].value,t=>(r(),b(i,{key:t,label:t,name:t},null,8,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),c("div",xe,[l(S,{class:"box-item",effect:"dark",placement:"top-start"},{content:a(()=>[_("隨車鎖異常 : 車機文字顯示"),De,_(" 上鎖成功 → 插銷可抽出"),Se,_(" 解鎖成功 → 插銷抽不出 ")]),default:a(()=>[l(y,{size:"20",color:"#ADADAD"},{default:a(()=>[l(v)]),_:1})]),_:1}),l(n,{label:e.value.checkdata[3].title},{default:a(()=>[l(d,{modelValue:e.value.checkdata[3].ischeck,"onUpdate:modelValue":o[7]||(o[7]=t=>e.value.checkdata[3].ischeck=t)},{default:a(()=>[(r(!0),p(k,null,h(e.value.checkdata[3].value,t=>(r(),b(i,{key:t,label:t,name:t},null,8,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),c("div",Ae,[c("div",Be,[l(n,null,{default:a(()=>[l(m,{type:"primary",plain:"",class:"col-12",onClick:C},{default:a(()=>[_("上一步")]),_:1})]),_:1})]),c("div",Ce,[l(n,null,{default:a(()=>[l(m,{type:"primary",plain:"",class:"col-12",onClick:o[8]||(o[8]=t=>B(D.value))},{default:a(()=>[_("下一步")]),_:1})]),_:1})])])],64)):e.value.catequery==="2.0E"?(r(),p(k,{key:2},[c("div",$e,[l(n,{label:e.value.checkdata[4].title},{default:a(()=>[l(d,{modelValue:e.value.checkdata[4].ischeck,"onUpdate:modelValue":o[9]||(o[9]=t=>e.value.checkdata[4].ischeck=t)},{default:a(()=>[(r(!0),p(k,null,h(e.value.checkdata[4].value,t=>(r(),b(i,{key:t,label:t,name:t},null,8,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),c("div",Ee,[l(S,{class:"box-item",effect:"dark",content:"100%面積嚴重生鏽",placement:"top-start"},{default:a(()=>[l(y,{size:"20",color:"#ADADAD"},{default:a(()=>[l(v)]),_:1})]),_:1}),l(n,{label:e.value.checkdata[5].title},{default:a(()=>[l(d,{modelValue:e.value.checkdata[5].ischeck,"onUpdate:modelValue":o[10]||(o[10]=t=>e.value.checkdata[5].ischeck=t)},{default:a(()=>[(r(!0),p(k,null,h(e.value.checkdata[5].value,t=>(r(),b(i,{key:t,label:t,name:t},null,8,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),c("div",Te,[l(S,{class:"box-item",effect:"dark",content:"脫落、破損、不亮",placement:"top-start"},{default:a(()=>[l(y,{size:"20",color:"#ADADAD"},{default:a(()=>[l(v)]),_:1})]),_:1}),l(n,{label:e.value.checkdata[6].title},{default:a(()=>[l(d,{modelValue:e.value.checkdata[6].ischeck,"onUpdate:modelValue":o[11]||(o[11]=t=>e.value.checkdata[6].ischeck=t)},{default:a(()=>[(r(!0),p(k,null,h(e.value.checkdata[6].value,t=>(r(),b(i,{key:t,label:t,name:t},null,8,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),c("div",qe,[l(S,{class:"box-item",effect:"dark",content:"租借使用中，車燈應全程亮起",placement:"top-start"},{default:a(()=>[l(y,{size:"20",color:"#ADADAD"},{default:a(()=>[l(v)]),_:1})]),_:1}),l(n,{label:e.value.checkdata[7].title},{default:a(()=>[l(d,{modelValue:e.value.checkdata[7].ischeck,"onUpdate:modelValue":o[12]||(o[12]=t=>e.value.checkdata[7].ischeck=t)},{default:a(()=>[(r(!0),p(k,null,h(e.value.checkdata[7].value,t=>(r(),b(i,{key:t,label:t,name:t},null,8,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),c("div",Ue,[c("div",Fe,[l(n,null,{default:a(()=>[l(m,{type:"primary",plain:"",class:"col-12",onClick:C},{default:a(()=>[_("上一步")]),_:1})]),_:1})]),c("div",Ie,[l(n,null,{default:a(()=>[l(m,{type:"primary",plain:"",class:"col-12",onClick:o[13]||(o[13]=t=>B(D.value))},{default:a(()=>[_("下一步")]),_:1})]),_:1})])])],64)):X("",!0)])]),_:1},8,["model","rules"])]),l(re,{centerDialogVisible:A.value,onCloseModal:P,onSubmitFrom:T,"upload-data":E.value},null,8,["centerDialogVisible","upload-data"])],64)}}});const Ke=G(Me,[["__scopeId","data-v-5099cb0b"]]);export{Ke as default};
