/* empty css             *//* empty css                        *//* empty css                    *//* empty css                  *//* empty css               *//* empty css                 *//* empty css                  */import{d as C,r as u,a7 as M,c as y,e as c,h as s,a as o,w as d,i as T,a8 as q,a9 as B,aa as F,o as w,ab as p,a4 as N,ac as Y,ad as U,ae as $}from"./index-8f6ddfd6.js";import{u as z}from"./auth-6ffae5c2.js";const A={class:"container text-center"},I={class:"row my-3"},L={class:"fs-4"},O={class:"row mb-3"},S={class:"fs-4 col-6"},j={class:"fs-4 col-6"},G=c("p",{class:"fs-1"},"模擬體驗詳細資訊",-1),te=C({__name:"ImforView",setup(H){const v=u([]),b=u(0),f=u(0),h=u(0),x=z(),{account:D}=x.getUserid(),m=u("全部"),E=[{value:"全部",label:"全部"},{value:"台北市",label:"台北市"},{value:"新北市",label:"新北市"},{value:"桃園市",label:"桃園市"},{value:"竹科",label:"竹科"},{value:"新竹市",label:"新竹市"},{value:"新竹縣",label:"新竹縣"},{value:"苗栗縣",label:"苗栗縣"},{value:"台中市",label:"台中市"},{value:"彰化縣",label:"彰化縣"},{value:"嘉義市",label:"嘉義市"},{value:"嘉義縣",label:"嘉義縣"},{value:"台南市",label:"台南市"},{value:"高雄市",label:"高雄市"},{value:"屏東縣",label:"屏東縣"}],g=async(t="全部")=>{const l=`https://simulation.youbike.com.tw/biketest/biketest?id=${D}`;try{const r=(await T.get(l)).data.data.filter(e=>k(e.test_date)),a=t==="全部"?r:r.filter(e=>V(e.station_name)===t);v.value=a.map(e=>({date:e.test_date,name:e.station_name,number:e.carnum})),b.value=a.length,f.value=a.filter(e=>e.sys==="2.0").length,h.value=a.filter(e=>e.sys==="2.0E"||e.sys==="2.0e").length}catch(n){console.error("Error fetching data:",n)}},V=t=>t?t.split("-")[0]:"",k=t=>{if(!t)return!1;const l=new Date(t),n=l.getFullYear(),_=l.getMonth()+1,r=new Date,a=r.getFullYear(),e=r.getMonth()+1;return n===a&&_===e};return M(m,async t=>{try{await g(t)}catch(l){console.error("Error in watch:",l)}}),(async()=>{try{await g()}catch(t){console.error("Error on initialization:",t)}})(),(t,l)=>{const n=q,_=U,r=B,a=$,e=F;return w(),y("div",A,[c("div",I,[c("div",L,[s(" 本月台數 "),o(n,{class:"mx-1 fs-4",type:"danger"},{default:d(()=>[s(p(b.value),1)]),_:1}),s(" 台 ")])]),c("div",O,[c("div",S,[s(" 2.0 : "),o(n,{class:"mx-1 fs-4",type:"danger"},{default:d(()=>[s(p(f.value),1)]),_:1}),s(" 台 ")]),c("div",j,[s(" 2.0E : "),o(n,{class:"mx-1 fs-4",type:"danger"},{default:d(()=>[s(p(h.value),1)]),_:1}),s(" 台 ")])]),o(r,{modelValue:m.value,"onUpdate:modelValue":l[0]||(l[0]=i=>m.value=i),placeholder:"請選擇城市",style:{width:"300px"}},{default:d(()=>[(w(),y(N,null,Y(E,i=>o(_,{key:i.value,label:i.label,value:i.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),c("div",null,[G,o(e,{data:v.value,stripe:"",height:"450",border:"",style:{width:"100%"}},{default:d(()=>[o(a,{prop:"date",label:"時間",align:"center"}),o(a,{prop:"name",label:"場站名稱",align:"center"}),o(a,{prop:"number",label:"車號",align:"center"})]),_:1},8,["data"])])])}}});export{te as default};
